!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.Nibara=o():e.Nibara=o()}(this,function(){return function(e){function o(t){if(n[t])return n[t].exports;var i=n[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}var n={};return o.m=e,o.c=n,o.p="",o(0)}([function(e,o,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function i(){Logger.info("[Breaking News] compruebaCookieWebPush");var e="BreakingNews-ABC";return Logger.info("[Breaking News] src: "+e),!(null===Cookies(e)||""===Cookies(e)||"null"===Cookies(e)||"undefined"==typeof Cookies(e))}var a=n(1),r=t(a),c=n(2),s=n(4),l=t(s),d=n(3),u=t(d);Logger.debug("script article loaded");Voonto.getInstance();(0,u.default)(),(0,c.shareMeta)();var f=null;if($(".compartir-email").on("click",function(){null===f&&(f=new r.default(".capa-compartir-email"),f.bind()),f.toggle()}),Voonto.$("[data-voc-vam]").on("vam:isempty",function(){Logger.info("[VAM] Ad slot is empty, hide parent"),Voonto.$(this).parent().hide()}),Voonto.is.mobile()||Voonto.is.tablet()){var g=Voonto.$(".publi-sticky");g.find("[data-voc-vam]").on("vam:isempty",function(){Logger.info("[data-voc-vam][Breaking News] position megabanner_sticky is empty");var e=Voonto.$(".urgente-teinteresa"),o=!0;if(e.length>0){var n=e.find(".cerrar"),t=n.data("type");"urgente"===t?i()?Logger.info("[data-voc-vam][Breaking News] urgente hide. Existe cookie"):(Logger.info("[data-voc-vam][Breaking News] urgente show. No existe cookie"),o=!1):(Logger.info("[data-voc-vam][Breaking News] urgente show. existe urgente múltiple"),o=!1)}if(o){Logger.info("BreakingNews ad slot is empty"),g.hide();var a=new l.default;a.load(Voonto.$("#breaking-news-container"))}else Logger.info("BreakingNews ad slot is empty but exist urgente"),g.hide()}),g.find("[data-voc-vam]").on("vam:inactive",function(){Logger.info("[data-voc-vam][Breaking News] position megabanner_sticky is inactive");var e=Voonto.$(".urgente-teinteresa"),o=!0;if(e.length>0){var n=e.find(".cerrar"),t=n.data("type");"urgente"===t?i()?Logger.info("[data-voc-vam][Breaking News] urgente hide. Existe cookie"):(Logger.info("[data-voc-vam][Breaking News] urgente show. No existe cookie"),o=!1):(Logger.info("[data-voc-vam][Breaking News] urgente show. existe urgente múltiple"),o=!1)}if(o){Logger.info("BreakingNews ad slot is inactive"),g.hide();var a=new l.default;a.load(Voonto.$("#breaking-news-container"))}else Logger.info("BreakingNews ad slot is inactive but exist urgente"),g.hide()}),g.find("[data-voc-vam]").on("vam:slotrendered",function(){var e=Voonto.$(".urgente-teinteresa"),o=!0;if(e.length>0){var n=e.find(".cerrar"),t=n.data("type");"urgente"===t?i()?Logger.info("[data-voc-vam][Breaking News] urgente hide. Existe cookie"):(Logger.info("[data-voc-vam][Breaking News] urgente show. No existe cookie"),o=!1):(Logger.info("[data-voc-vam][Breaking News] urgente show. existe urgente múltiple"),o=!1)}o?(Logger.info("[data-voc-vam][Breaking News] ad slot is active"),g.show()):(Logger.info("[data-voc-vam][Breaking News] ad slot is active but exist urgente"),g.hide())}),g.on("click",function(){Voonto.$(this).hide()});var m=Voonto.$("input#capa_compartir"),h=Voonto.$('label[for="capa_compartir"]'),p=Voonto.$("input#capa_compartir_fija"),v=Voonto.$('label[for="capa_compartir_fija"]'),w=Voonto.$("aside.herramientas:not(.fija) .mas-compartir"),b=Voonto.$("aside.herramientas.fija .mas-compartir"),k=function(){Logger.info("[CloseShareLayerHandler] scrolled"),m.prop("checked")===!0&&(m.prop("checked",!1),Logger.info("[CloseShareLayerHandler] ShareLayer abierta, cerrando..")),Voonto.$(window).unbind("scroll",void 0),Voonto.$(document).unbind("click",V)},y=function(){Logger.info("[CloseFixedShareLayerHandler] scrolled"),p.prop("checked")===!0&&(p.prop("checked",!1),Logger.info("[CloseShareLayerHandler] ShareFixedLayer abierta, cerrando..")),Voonto.$(window).unbind("scroll",void 0),Voonto.$(document).unbind("click",V)},V=function(e){Logger.info("[CloseShareLayerHandler] document onclick"),m.prop("checked")===!0&&Voonto.$.contains(w.get(0),e.target)===!1&&Voonto.$.contains(h.get(0),e.target)===!1&&(m.prop("checked",!1),Voonto.$(document).unbind("click",void 0),Voonto.$(window).unbind("scroll",k),Logger.info("[CloseShareLayerHandler] ShareLayer abierta, cerrando..")),p.prop("checked")===!0&&Voonto.$.contains(b.get(0),e.target)===!1&&Voonto.$.contains(v.get(0),e.target)===!1&&(p.prop("checked",!1),Voonto.$(document).unbind("click",void 0),Voonto.$(window).unbind("scroll",y),Logger.info("[CloseShareLayerHandler] ShareFixedLayer abierta, cerrando.."))};m.on("change",function(){var e=Voonto.$(this);Logger.info("[CloseShareLayerHandler] input change"),e.prop("checked")===!0?(Voonto.$(window).one("scroll",k),Voonto.$(document).unbind("click",V).on("click",V)):(Voonto.$(window).unbind("scroll",k),Voonto.$(document).unbind("click",V))}),p.on("change",function(){var e=Voonto.$(this);Logger.info("[CloseFixedShareLayerHandler] input change"),e.prop("checked")===!0?(Voonto.$(window).one("scroll",y),Voonto.$(document).unbind("click",V).on("click",V)):(Voonto.$(window).unbind("scroll",y),Voonto.$(document).unbind("click",V))})}},function(e,o){"use strict";function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var t=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),i="No se ha podido compartir.",a="Email enviado correctamente.",r="El nombre debe ser de al menos tres caracteres",c="Tu email debe tener un formato correcto",s="Su email debe tener un formato correcto",l="Debes rellenar el captcha",d=Voonto.$,u=function(){function e(o){n(this,e),this.$form=d(o),this.$button=this.$form.find(".boton-form"),this.sended=!1}return t(e,[{key:"validaEmail",value:function(e){var o=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return o.test(e)}},{key:"validaForm",value:function(e,o,n,t){var i=!0,a=this.$form.find(".nombre").empty(),d=this.$form.find(".tu_email").empty(),u=this.$form.find(".su_email").empty(),f=this.$form.find(".captcha").empty();return e.length<=2&&(a.text(r),i=!1),this.validaEmail(o)||(d.text(c),i=!1),this.validaEmail(n)||(u.text(s),i=!1),0===t.length&&(f.text(l),i=!1),i}},{key:"handleOnsubmit",value:function(){if(this.sended)return!1;var e=this.$form.find(".enviaremailmsg").empty(),o=this.$form.find("#tu_nombre").val(),n=this.$form.find("#tu_email").val(),t=this.$form.find("#su_email").val(),r="undefined"!=typeof grecaptcha?grecaptcha.getResponse():"";if(this.validaForm(o,n,t,r)){var c={sender:n,senderName:o,recipient:t,captcha:r,url:window.location.protocol+"//"+window.location.host+window.location.pathname};Logger.info("send ajax request",c),this.$button.removeClass("btn-azul").addClass("btn-gris"),this.sended=!0,d.ajax({type:"post",url:"/ajax/v2/sharemail.html",data:c,timeout:2e4}).fail(function(){this.sended=!1,e.text(i)}).done(function(o){var n;n=o&&"ok"===o.status?a:o&&o.message?o.message:i,e.text(n),grecaptcha.reset()})}return!1}},{key:"clean",value:function(){this.$form.find(".nombre").empty(),this.$form.find(".tu_email").empty(),this.$form.find(".su_email").empty(),this.$form.find(".captcha").empty(),this.$form.find("#su_email").val(""),this.sended=!1}},{key:"bind",value:function(){var e=this;this.$form.on("submit",function(){return e.handleOnsubmit()}),this.$button.on("click",function(){return e.handleOnsubmit()}),this.$form.find(".icono.cerrar").on("click",function(){e.clean(),e.$form.hide()});var o=Voonto.getInstance();o.load("https://www.google.com/recaptcha/api.js")}},{key:"toggle",value:function(){this.$form.toggle()}}]),e}();o.default=u},function(e,o){"use strict";function n(e,o){var n="undefined"!=typeof window.voc_tcnew&&window.voc_tcnew?window.voc_tcnew:window.voc_tc;return e+"#ns_campaign=rrss-inducido&ns_mchannel="+window.voc_site+"&ns_source="+o+"&ns_linkname="+n+"&ns_fee=0"}function t(e,o){u(e).on("click",function(){var e="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n(o,"fb"));window.open(e,"","toolbar=0, status=0, width=900, height=500")})}function i(e,o,t,i){u(e).on("click",function(){var e="https://twitter.com/intent/tweet?url="+encodeURIComponent(n(o,"tw"));t&&(e=e+"&text="+encodeURIComponent(t)),i&&(e=e+"&via="+encodeURIComponent(i)),window.open(e,"","toolbar=0, status=0,width=650, height=360")})}function a(e,o){u(e).on("click",function(){var e="https://plus.google.com/share?url="+encodeURIComponent(n(o,"gp"));window.open(e,"","toolbar=0, status=0,width=900, height=500")})}function r(e,o,t){var i="whatsapp://send?text="+encodeURIComponent(t)+" "+encodeURIComponent(n(o,"wh")),a=u(e);"A"===a.prop("tagName")?a.attr("href",i):a.on("click",function(){window.location.assign(i)})}function c(e,o,t,i){u(e).on("click",function(){var e="https://pinterest.com/pin/create/bookmarklet/?url="+encodeURIComponent(n(o,"pn"));i&&(e=e+"&media="+encodeURIComponent(i)),t&&(e=e+"&description="+encodeURIComponent(t)),window.open(e,"","toolbar=0, status=0,width=900, height=500")})}function s(e,o){u(e).on("click",function(){var e="https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(n(o,"lk"));window.open(e,"","toolbar=0, status=0,width=900, height=500")})}function l(){var e=u("meta[property='og:url']").attr("content");if(e){var o=u("meta[property='og:title']").attr("content"),n=u("meta[property='og:image']").attr("content"),l=u("meta[name='twitter:site']").attr("content").replace(/^ *@/,"");Logger.info("share links",{ogurl:e,ogtitle:o,ogimage:n,twvia:l}),t(".voc-share-fb",e),i(".voc-share-tw",e,o,l),a(".voc-share-gp",e),c(".voc-share-pi",e,o,n),s(".voc-share-ln",e),r(".voc-share-wa",e,o)}}function d(){u(".redes-sociales-portada").each(function(){var e=u(this),o=e.data("url"),n=e.data("title"),a="abc_es";o&&(t(e.find(".facebook"),o),i(e.find(".twitter"),o,n,a),r(e.find("a.whatsapp"),o,n))})}Object.defineProperty(o,"__esModule",{value:!0}),o.shareMeta=l,o.shareMetaPortada=d;var u=Voonto.$},function(e,o){"use strict";function n(){for(var e=!1,o=document.location.hash.slice(1).split("&"),n=0,t=o.length;n<t;n++)if("disqus_thread"===o[n]){e=!0;break}return e}function t(e,o,n){var t="true"===e.attr("aria-expanded");t||(Logger.debug("[comments] expand comments"),n.then(function(e){e.removeClass(c),r.trigger(s)}),e.attr("aria-expanded","true"),o.trigger("inview"))}function i(e,o,n){var t="true"===e.attr("aria-expanded");t?n.then(function(e){e.addClass(c),r.trigger(s)}):n.then(function(e){e.removeClass(c),r.trigger(s)}),e.attr("aria-expanded",t?"false":"true"),o.trigger("inview")}function a(){Logger.debug("[comments] commentsInit()");var e=r.lookup("vocento.config.nibara").commentsPath;if(void 0===e)throw"commentsPath path in config is empty";var o=new Voonto.RSVP.Promise(function(e,o){r.when("vocuser:gigyaready").then(function(){e(gigya)}),setTimeout(function(){o("timeout")},l)}),a=new Voonto.RSVP.Promise(function(e,o){r.when("vocuser:ready").then(function(o){e(o)}),setTimeout(function(){o("timeout")},l)}),c=new Voonto.RSVP.Promise(function(e,o){r.one("vocuser:comments:load",function(){e(Voonto.$("#commentsBlock")),r.trigger(s)})}),d=Voonto.$(".icono-comentarios"),u=Voonto.$(".voc-comments-title.collapsed"),f=Voonto.$("[data-voc-comments]");n()&&(Logger.debug("[comments] comments hash"),t(u,f,c)),d.on("click",function(){Logger.debug("[comments] click toolbar icon",this),t(u,f,c)}),u.on("click",function(){Logger.debug("[comments] toogle comments",this),i(u,f,c)}),r.one("vocuser:comments:error",function(){Logger.warning("[comments] comments widget error")}),a.then(function(e){"anonimo"===e.getUserType()?$("<style>.gigya-logged-in{display:none !important;}</style>").appendTo(document.head):$("<style>.gigya-logged-out{display:none !important;}</style>").appendTo(document.head)}).catch(function(e){Logger.warning("[comments] gigyaUx error: "+e)}),o.then("vocuser:gigyaready").then(function(){r.load(e+"/comments.js")}).catch(function(e){Logger.warning("[comments] gigya error: "+e)})}Object.defineProperty(o,"__esModule",{value:!0});var r=Voonto.getInstance(),c="collapse",s="layout:recalc-sticky",l=2e4;o.default=a},function(e,o){"use strict";function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(o,"__esModule",{value:!0});var t=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),i=Voonto.getInstance(),a=function(){function e(o){if(n(this,e),this.libPath=i.lookup("vocento.config.nibara").libPath,void 0===this.libPath)throw"nibara libPath config is empty";this.isMobile=Voonto.is.mobile(),this.isTablet=Voonto.is.tablet()}return t(e,[{key:"load",value:function(e){var o=this,n=i.lookup("vocento.tracking.comscore"),t=n.voc_tcnew?n.voc_tc:null,a=n.voc_se;if("undefined"==typeof noticiaid||!noticiaid||!t||!a)return Logger.error("No se puede cargar te-interesa"),!1;var r="/ajax/v2/te-interesa.html?recid="+noticiaid+"&voc_tc="+t+"&voc_se="+a;Voonto.$.ajax({type:"get",url:r,timeout:2e4}).fail(function(){Logger.error("No se puede cargar te-interesa"),o.mobileShowToolbar()}).done(function(n){n?(o.mobileHideToolbar(),e.html(n),o.swiper(e.find(".swiper-container")),o.mobileEvents(e)):o.mobileShowToolbar()})}},{key:"mobileShowToolbar",value:function(){this.isMobile&&Voonto.SocialToolbar&&Voonto.SocialToolbar.enable()}},{key:"mobileHideToolbar",value:function(){this.isMobile&&Voonto.SocialToolbar&&Voonto.SocialToolbar.disable()}},{key:"mobileEvents",value:function(e){var o=this;this.isMobile&&(this.mobileHideToolbar(),e.find(".cerrar").click(function(){e.hide(),o.mobileShowToolbar()}),Voonto.$(".noticia").click(function(){Logger.info("[Breaking News] click Te-Interesa");var e=Voonto.$(this).data("type");Logger.info("[Breaking News] type: ",e),Logger.info("[Breaking News] href: ",Voonto.$(this).data("href")),window.location.href=Voonto.$(this).data("href")}))}},{key:"swiper",value:function(e){var o=this;Logger.info("Te-Interesa: Cargado JQuery-UI"),e.find(".swiper-prev-row-bn").css("zIndex",99),e.find(".swiper-next-row-bn").css("zIndex",99),e.find(".swiper-wrapper").attr("style","min-height: 1px !important;");var n=0;e.find("[id^='j-swiper-slide-']").each(function(){n++}),Logger.info("Te-Interesa: Número elementos: "+n);var t=this.setTimer(n,e);e.find(".swiper-prev-row-bn").on("click",function(){Logger.info("Te-Interesa: Noticia anterior"),clearInterval(t),t=o.setTimer(n,e),o.changeSlide("anterior",n,e)}),e.find(".swiper-next-row-bn").on("click",function(){Logger.info("Te-Interesa: Noticia siguiente"),clearInterval(t),t=o.setTimer(n,e),o.changeSlide("siguiente",n,e)})}},{key:"setTimer",value:function(e,o){var n=this,t=setInterval(function(){Logger.info("Te-Interesa: setInterval - Noticia siguiente"),n.changeSlide("interval",e,o)},7e3);return t}},{key:"changeSlide",value:function(e,o,n){var t=Voonto.$("[id^='j-swiper-slide-']:visible").data("pos");Logger.info("Te-Interesa: ID Visible: "+t);var i=t-1;if("anterior"===e){if(t<=1)return!1}else if(i=t+1,"interval"===e&&t===o&&(i=1,t=1),t>=o)return!1;n.find("[id^='j-swiper-slide-']").each(function(e,o){i===Voonto.$(o).data("pos")?Voonto.$(o).show():Voonto.$(o).hide()})}}]),e}();o.default=a}])});
//# sourceMappingURL=article-script.js.map