!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.Nibara=o():e.Nibara=o()}(this,function(){return function(e){function o(a){if(t[a])return t[a].exports;var r=t[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var t={};return o.m=e,o.c=t,o.p="",o(0)}([function(e,o){"use strict";Voonto.getInstance().define(["module"],function(e){function o(e){var o=$(this),a=o.data("btn");Logger.debug("starred module response "+a+": ",e),e&&"undefined"!=typeof e.code&&200===e.code&&("following"===a?e.following===!0?o.data("active",!0).removeClass("fondo-gris").addClass("fondo-azul").find(".accion").text("Siguiendo"):o.data("active",!1).removeClass("fondo-azul").addClass("fondo-gris").find(".accion").text("Seguir"):"starred"===a&&(e.starred===!0?o.data("active",!0).addClass("activo"):o.data("active",!1).removeClass("activo")),o.one("click",t))}function t(e){var t=$(this),a=t.data("btn"),n=t.data("active"),d={id:t.data("id"),type:t.data("type")};d[a]=!n;var i={};i[a]=d,Logger.debug("starred update "+a+" ",JSON.stringify(i)),$.ajax({type:"post",url:r+a+"/update",data:i,dataType:"json",context:t,timeout:1e4}).fail(function(e,o,t){Logger.error("starred module update "+a+" error: ",o)}).done(o)}function a(e){var t=e.data("btn"),a=e.data("type"),n=e.data("id");Logger.info("starred module "+t+" "+a+" "+n),"starred"!==t&&"following"!==t||Voonto.$.ajax({url:r+t+"/"+a+"/"+n,dataType:"json",context:e,timeout:1e4}).fail(function(e,o,a){Logger.error("starred module: retrieve "+t+" error ",o)}).done(o)}var r="/ajax/v2/api/v1/";return{wakeUp:function(o){Logger.info("wake up module "+e.id);var t=Voonto.getInstance(),n=t.lookup("vocento.config.nibara").starredUrl;void 0!==n&&(r=n+"/"),t.when("vocuser:ready").then(function(e){var t=e.getUserType();"anonimo"!==t?a(o):o.one("click",function(){e.showLogin()})})}}})}])});
//# sourceMappingURL=starred-module.js.map