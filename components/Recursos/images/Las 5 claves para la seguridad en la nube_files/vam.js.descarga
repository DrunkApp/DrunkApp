!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.AdsManager=o():e.AdsManager=o()}("undefined"!=typeof self?self:this,function(){return function(e){function o(i){if(n[i])return n[i].exports;var t=n[i]={i:i,l:!1,exports:{}};return e[i].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var i=window.webpackJsonpAdsManager;window.webpackJsonpAdsManager=function(o,n,a){for(var r,s,d=0,c=[];d<o.length;d++)s=o[d],t[s]&&c.push(t[s][0]),t[s]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);for(i&&i(o,n,a);c.length;)c.shift()()};var n={},t={4:0};return o.e=function(e){function i(){s.onerror=s.onload=null,clearTimeout(d);var o=t[e];0!==o&&(o&&o[1](new Error("Loading chunk "+e+" failed.")),t[e]=void 0)}var n=t[e];if(0===n)return new Promise(function(e){e()});if(n)return n[2];var a=new Promise(function(o,i){n=t[e]=[o,i]});n[2]=a;var r=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,o.nc&&s.setAttribute("nonce",o.nc),s.src=o.p+""+({0:"rijndael-js"}[e]||e)+".js";var d=setTimeout(i,12e4);return s.onerror=s.onload=i,r.appendChild(s),a},o.m=e,o.c=n,o.d=function(e,i,n){o.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(i,"a",i),i},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="//static.vocento.com/vam/3.10.1/",o.oe=function(e){throw console.error(e),e},o(o.s=79)}({0:function(e,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.NAMESPACE="vocento",o.PROMISES_PROPERTY="__PROMISES__",o.DEFAULT_TIMEOUT=2e3,o.VOCUSER_COOKIE="voc_uid",o.PAYWALL_COOKIE="voc_paywall",o.SHOW_LOGS=document.location.search.indexOf("vam_debug=1")>-1||document.location.search.indexOf("gdp_debug=1")>-1,o.DEFAULT_LOG_TEMPLATE="[Ads Manager]",o.CONFIG_NAMESPACE="vocento.config.vam",o.EDITIONS_NAMESPACE="vocento.site.editions",o.GPT_ID_VOCENTO="4900",o.GPT_READY="vam:gpt:ready",o.GPT_TIMEOUT=2e3,o.TIMEOUT_POSICIONES_ESTANDAR=3e3,o.ALTOS_MINIMOS_DISPOSITIVOS={mobile:0,tablet:200,desktop:300},o.POSITION_FLUID="'fluid'",o.SLOT_RENDERED="vam:slotrendered",o.SLOT_EMPTY="vam:isempty",o.SLOT_VIEWABLE="vam:viewable",o.SLOT_INACTIVE="vam:inactive",o.DEFAULTS={hideNoAds:!0,refresh:!1,responsive:!1},o.CAPTURADOR_WS="//publi.cmvocento.com/capturador/preview",o.MCRYPT_KEY="acsNdl09acs72AEdacsNdl09acs72AEd",o.VAM_CSS_URL="//netssl.vocento.com/cmvocento/css/vam.css",o.JSON_GDP2_0=0,o.JSON_GDP2_1=1,o.JSON_GDP2_2=2,o.NOMBRE_FORMATO_JSON=["GDP2.0","GDP2.1","GDP2.2+"],o.GPT_URL="www.googletagservices.com/tag/js/gpt.js",o.HEADER_BIDDING_READY="vam:headerbidding:ready",o.PREBID_URL="//static.vocento.com/vam/3.10.1/prebid.js",o.DEFAULT_PREBID_LOAD_TIMEOUT=7e3,o.AMAZON_URL="//c.amazon-adsystem.com/aax2/apstag.js",o.DEFAULT_AMAZON_LOAD_TIMEOUT=7e3,o.AMAZON_CONFIG={pubID:"3470",adServer:"googletag"},o.OLD_PREFIX="publi_",o.NEW_SUFFIX="-id"},1:function(e,o,i){"use strict";function n(){var e;r.SHOW_LOGS&&(e=console).log.apply(e,[r.DEFAULT_LOG_TEMPLATE].concat(Array.prototype.slice.call(arguments)))}function t(){var e;r.SHOW_LOGS&&(e=console).warn.apply(e,[r.DEFAULT_LOG_TEMPLATE].concat(Array.prototype.slice.call(arguments)))}function a(){var e;r.SHOW_LOGS&&(e=console).error.apply(e,[r.DEFAULT_LOG_TEMPLATE].concat(Array.prototype.slice.call(arguments)))}Object.defineProperty(o,"__esModule",{value:!0}),o.showLog=n,o.showWarn=t,o.showError=a;var r=i(0)},2:function(e,o,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});var t=i(24),a=n(t),r=i(25),s=n(r),d=i(27),c=n(d),g=i(7),l={},p=Object.prototype.hasOwnProperty,f={load:function(e){var o,i,n,t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=e,t=e.split("?").shift(),p.call(l,t)?l[t]:(i=document.createElement("script"),i.type="text/javascript",i.src=n,i.async=!0,a.text&&(i.text=a.text),o=new window.RSVP.Promise(function(e,o){i.onload=function(){return e(i)},i.onerror=o,document.head.appendChild(i)}),l[t]=o,o)}};(0,g.extend)(f,a.default),(0,g.extend)(f,s.default),(0,g.extend)(f,c.default),o.default=f},21:function(e,o,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function t(e,o){var i,n="Voonto"in window&&"getInstance"in window.Voonto?window.Voonto.getInstance():void 0;if(!P){if(!e||!o)throw Error("[Ads Manager] missing configuration");P=!0,i=new _.default(e,o),u.default.init(i,!1),a(),n&&(n.on("voonto:reload",r),n.on("vam:refresh",s)),p.default.on("voonto:reload",r),p.default.on("vam:refresh",s)}}function a(e){y("[data-voc-vam]",e).each(function(){u.default.printAds(y(this))})}function r(e,o){var i,n=o.data("voc-vam-configgdp")||p.default.lookup(w.CONFIG_NAMESPACE),t=o.data("voc-vam-force-oas")||"";n.options.OAS=t.length>0?d(n.options.OAS,t):n.options.OAS,i=new _.default(n.media,n.options),(0,m.showLog)("Reload event has been invoked. Config value: ",n),u.default.init(i,!0,o),a(o)}function s(e,o){var i="string"==typeof o?JSON.parse(o):o;u.default.printAds(i)}function d(e,o){return e.adunit&&(e.adunit=e.adunit.replace(new RegExp("portada$","g"),o.toString())),e.desktop.portada=e.desktop.portada.replace(new RegExp("portada$","g"),o.toString()),e.mobile.portada=e.mobile.portada.replace(new RegExp("portada$","g"),o.toString()),(0,m.showLog)('New OAS has been set, using value "'+o+'"'),e}Object.defineProperty(o,"__esModule",{value:!0}),o.VERSION=void 0,i(22),i(23);var c=i(8),g=n(c),l=i(2),p=n(l),f=i(28),u=n(f),h=i(9),_=n(h),v=i(4),w=i(0),m=i(1),b=window,y=b.$,P=!1;!function(){window.Vocento=window.Vocento||{},window.Vocento.Publicidad=function(){},window.Vocento.Publicidad.prototype={init:function(e,o,i){t(o,i)},printAds:function(e){return u.default.printAds(e)},getOasSitepage:function(){return u.default.getOasSitepage.apply(u.default,arguments)},getSizesGoogle:function(){return u.default.getSizesGoogle.apply(u.default,arguments)},getValueUser:function(){return u.default.getValueUser.apply(u.default,arguments)}}}(),y(document).ready(function(){var e=p.default.lookup(w.CONFIG_NAMESPACE);e=(0,v.isEmpty)(e)?{media:window.configGDPMedio,options:window.configGDP}:e,t(e.media,e.options)});o.VERSION=g.default.version},22:function(e,o,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=i(0);if(!("$"in window)||"function"!=typeof window.$)throw Error(t.DEFAULT_LOG_TEMPLATE+" missing jQuery library on page");if(!("Cookies"in window)||"function"!=typeof window.Cookies)throw Error(t.DEFAULT_LOG_TEMPLATE+" missing Cookies library on page");if(!("RSVP"in window)||"object"!==n(window.RSVP))throw Error(t.DEFAULT_LOG_TEMPLATE+" missing RSVP library on page");if(!("event"in window.$&&"special"in window.$.event&&"inview"in window.$.event.special&&"object"===n(window.$.event.special.inview)))throw Error(t.DEFAULT_LOG_TEMPLATE+" missing InView jQuery plugin on page")},23:function(e,o,i){"use strict";function n(){return 1e13*Math.random()}function t(e){e.getUserType()===d.ANONYMOUS?$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=76171930?" width="1" height="1" border="0" />'):($("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=76172050?" width="1" height="1" border="0" />'),"undefined"!=typeof Voonto?s.default.when(g).then(function(e){var o,i;e.responseGetUserInfo&&(o=e.responseGetUserInfo.user&&e.responseGetUserInfo.user.gender?e.responseGetUserInfo.user.gender:null,i=e.responseGetUserInfo.user&&e.responseGetUserInfo.user.age?e.responseGetUserInfo.user.age:null),a(o,i)}):$("body").on("vocento.gigya.accounts.onDataReady",function(e){var o,i;e.gigya_event&&(o=e.gigya_event.profile&&e.gigya_event.profile.gender?e.gigya_event.profile.gender:null,i=e.gigya_event.profile&&e.gigya_event.profile.age?e.gigya_event.profile.age:null),a(o,i)}))}function a(e,o){switch(e){case c.FEM:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75868810?" width="1" height="1" border="0" />');break;case c.MAS:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75868570?" width="1" height="1" border="0" />')}switch(!0){case""!==o&&o<=17:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75867610?" width="1" height="1" border="0" />');break;case o>=18&&o<=24:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75867850?" width="1" height="1" border="0" />');break;case o>=25&&o<=34:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75867970?" width="1" height="1" border="0" />');break;case o>=35&&o<=44:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75868210?" width="1" height="1" border="0" />');break;case o>=45&&o<=54:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75868330?" width="1" height="1" border="0" />');break;case""!==o&&o<54:$("head").append('<img src="//pubads.g.doubleclick.net/activity;dc_iu=/4900/pixel.bfp.vocento;ord='+n()+';dc_seg=75868450?" width="1" height="1" border="0" />')}}var r=i(2),s=function(e){return e&&e.__esModule?e:{default:e}}(r),d=Object.freeze({ANONYMOUS:"anonimo"}),c=Object.freeze({FEM:"f",MAS:"m"}),g="vocuser:userdata";$(document).ready(function(){s.default.when("vocuser:ready").then(t),$("body").on("vocento.gigya.products.onReady",function(e,o){var i;(i=o||window.gigyaUX)&&t(i)})})},24:function(e,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=i(1),t=Object.preventExtensions({on:function(){var e;(e=window.$(this)).on.apply(e,arguments)},one:function(){var e;(e=window.$(this)).one.apply(e,arguments)},off:function(){var e;(e=window.$(this)).off.apply(e,arguments)},trigger:function(){var e;n.showLog.apply(void 0,["Evented::trigger"].concat(Array.prototype.slice.call(arguments))),(e=window.$(this)).trigger.apply(e,arguments)}});o.default=t},25:function(e,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e,o){var i=[],n=!0,t=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done)&&(i.push(r.value),!o||i.length!==o);n=!0);}catch(e){t=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw a}}return i}return function(o,i){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return e(o,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=i(26),a=function(e){return e&&e.__esModule?e:{default:e}}(t),r=i(7),s=i(0),d=i(1),c={},g=Object.prototype.hasOwnProperty,l={whenUntil:function(e){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.DEFAULT_TIMEOUT;return(0,d.showLog)("[Deferred] whenUntil",{promiseNS:e,time:i}),new window.RSVP.Promise(function(n,t){setTimeout(t,i),o.when(e).then(n)})},when:function(e){var o,i,t;if((0,d.showLog)("[Deferred] when",e),!e)throw Error(s.DEFAULT_LOG_TEMPLATE+" [Deferred] At least 1 argument needed. 0 passed.");var a=e.split(":"),r=n(a,2);if(o=r[0],i=r[1],!o||!i)throw Error(s.DEFAULT_LOG_TEMPLATE+' [Deferred] Illegal promise namespace name. Expected "owner:name".');return g.call(c,e)?c[e].promise:(t=this.createGlobal(s.NAMESPACE+"."+o+"."+s.PROMISES_PROPERTY),t[i]=window.RSVP.defer(),c[e]=t[i],t[i].promise)},promised:function(e,o){var i,t,a;if((0,d.showLog)("[Deferred] promised",{promiseNS:e,value:o}),!e)throw Error(s.DEFAULT_LOG_TEMPLATE+" [Deferred] At least 1 argument needed. 0 passed.");var r=e.split(":"),l=n(r,2);if(i=l[0],t=l[1],!i||!t)throw Error(s.DEFAULT_LOG_TEMPLATE+' [Deferred] Illegal promise namespace name. Expected "owner:name".');return g.call(c,e)?(c[e].resolve(o),this):(a=this.createGlobal(s.NAMESPACE+"."+i+"."+s.PROMISES_PROPERTY),a[t]=window.RSVP.defer(),a[t].resolve(o),c[e]=a[t],this)}};(0,r.extend)(l,a.default),o.default=l},26:function(e,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=i(0),t={createGlobal:function(e){var o=window;if(e)return e.split(".").forEach(function(e){o[e]=o[e]||{},o=o[e]}),o},lookup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.NAMESPACE,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return e.split(".").reduce(function(e,o){return e&&o in e?e[o]:{}},o)}};o.default=t},27:function(e,o,i){"use strict";function n(e){var o;try{o=JSON.parse(e)}catch(i){e=e.replace(/\+/g,"");try{o=JSON.parse(e)}catch(e){o={}}}return o}Object.defineProperty(o,"__esModule",{value:!0});var t=i(0),a=window,r=a.Cookies,s=Object.freeze({ANONYMOUS:"anonimo",REGISTERED:"registrado",SUBSCRIBER:"suscriptor",TRIAL:"trial"}),d={getUserType:function(){var e,o,i,a,d;return a=decodeURIComponent(r.get(t.VOCUSER_COOKIE)),d="undefined"===a?{}:n(a),e=s.ANONYMOUS,o=r.get(t.PAYWALL_COOKIE),o&&(i=o.split("|").pop()),i?e=i:d.uid&&(e=s.REGISTERED),e}};o.default=d},28:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineSlot(e){var o,i,n,t,a,r,s,d,c,g,l,p,f,u,h,_,v,w;if(r=_configManager.getSizesGoogle(e.position),s=_configManager.getIdDiv(e),d=e.tags||{},t=e.hideNoAds?".setCollapseEmptyDiv(true)":"",a=_configManager.globalTargetings,Object.keys(d).forEach(function(e){a+='.setTargeting("'+e+'", "'+d[e]+'")'}),c="mobile"===_configManager.deviceType?"m":"w",a+=".setTargeting('st', '"+_configManager.valueUserType+"').setTargeting('stt', '"+c+_configManager.valueUserType+"')",g=_configManager5.default.decryptedURL(),(void 0!==window.location&&(window.location.href.indexOf("vam_cmvkey=")>-1||window.location.href.indexOf("cmvkey=")>-1)||""!==g)&&(i=window.location.href.indexOf("vam_cmvkey=")>-1?"vam_cmvkey":"cmvkey",l=new RegExp("(\\?|&)"+i+"=([^?&]+)"),p=""!==g?l.exec(g):l.exec(window.location.href)))try{f=decodeURIComponent(p[2]),u=f.split(","),u.forEach(function(e){var o,i,n;o=e.split("="),i=o[0],n=o[1],a+='.setTargeting("'+i+'", "'+n+'")'})}catch(e){(0,_logger.showWarn)("Advertising:defineSlot:Error processing "+i+": "+e)}try{h=_getTopics(!1),h.length&&(a+='.setTargeting("topics", "'+h+'")')}catch(e){(0,_logger.showWarn)("Advertising:defineSlot:Error processing enableTopics: "+e)}try{_configManager.configGDPMedio.enableTpag&&(a+='.setTargeting("tpag", "'+_configManager.pageType+'")')}catch(e){(0,_logger.showWarn)("Advertising:defineSlot:Error processing tpag: "+e)}_={},v="",w="",!e.outOfPage&&e.responsive&&Array.isArray(e.responsive)&&e.responsive.length>0&&(_=_getSizeMapping(e),v=_&&_.definition?_.definition:"",w=_&&_.script?_.script:""),e.outOfPage?e.defineSlot&&(o=v+"window."+_getNombreSlot(e)+" = window.googletag.defineOutOfPageSlot('"+_configManager.getOasSitepage(e)+"', '"+s+"')"+w+".setTargeting('pos','"+e.position+"')"+a+t+".addService(googletag.pubads());"):e.defineSlot&&(o=v+"window."+_getNombreSlot(e)+" = window.googletag.defineSlot('"+_configManager.getOasSitepage(e)+"', "+r+", '"+s+"')"+w+".setTargeting('pos','"+e.position+"')"+a+t+".addService(googletag.pubads());"),n=_getClavePosicionInsertada(e),_insertedPositions[n]=o,(0,_logger.showLog)("Advertising:defineSlot:Ads ID",s),window.customcmd.push(_executeDefineSlot(o,e))}function _executeDefineSlot(scriptText,params){(0,_logger.showLog)("En defineSlot. defineSlot: "+scriptText),eval(scriptText),_notDisplayedSlots.push(params.position)}function _display(e){var o,i;return(0,_logger.showLog)("Advertising:display:Display position "+e.position+" with params",e),(o=_notDisplayedSlots.indexOf(e.position))<0?void(0,_logger.showLog)("Advertising:display:Position "+e.position+" has already been displayed"):((0,_logger.showLog)("Advertising:display:Position "+e.position+" is not displayed yet"),i=_configManager.getIdDiv(e),$("#"+i).length?((0,_logger.showLog)("Advertising:display:Queued position "+e.position+" to display"),void window.customcmd.push(function(){(0,_logger.showLog)("Advertising:display:Displaying "+e.position),window.googletag.display(i),_configManager.configGDPMedio.singleRequest?_notDisplayedSlots=[]:_notDisplayedSlots.splice(o,1)})):void(0,_logger.showWarn)("Advertising:display:DIV with ID "+i+" does not exist"))}function _getSizeMapping(e){var o,i,n,t;if(o="window.mapping_"+_getNombreSlot(e),i={definition:o+" = window.googletag.sizeMapping()",script:".defineSizeMapping("+o+")"},n=e.responsive,(0,_logger.showLog)("Advertising:getSizeMapping:Resposive param for position "+e.position,n),t=n.reduce(function(o,i){var t,a,r,s;if(""===o||o){if(a=i[0],2!==i.length||!Array.isArray(a)||2!==a.length)return void(0,_logger.showWarn)("Advertising:getSizeMapping:Malformed responsive param in position "+e.position+". responsive: "+n);if(t="",r=i[1],"string"==typeof r&&(-1!==r.indexOf("fluid")?r=_constants.POSITION_FLUID:void 0!==(r=_configManager.getSizesGoogle(r))&&"string"==typeof r&&(r=JSON.parse(r))),!Array.isArray(r)&&r!==_constants.POSITION_FLUID)return void(0,_logger.showWarn)("Advertising:getSizeMapping:Malformed responsive param in position "+e.position+". responsive: "+n);if(t="["+a[0]+","+a[1]+"],",r.length>0&&Array.isArray(r[0])){t+="[";for(var d=0;d<r.length;d++)s=r[d],2===s.length&&(t+=(0===d?"[":",[")+s[0]+","+s[1]+"]");t+="]"}else 2===r.length?t+="["+r[0]+","+r[1]+"]":r===_constants.POSITION_FLUID?t+=_constants.POSITION_FLUID:t+="[]";return o+".addSize("+t+")"}},""))return i.definition+=t+".build();",i}function _displayStandarQueued(){for((0,_logger.showLog)("Advertising:displayStandarQueued:Display queued positions");_standardDelayed.length;)Advertising.printAds(_standardDelayed.shift())}function _displayPrioritized(){(0,_logger.showLog)("Advertising:pintaPriorizadas:Painting the following positions : "+_configManager.prioritizedPositions),_pintaListaPosiciones(_configManager.prioritizedPositions,!0)}function _pintaListaPosiciones(e,o){_configManager.configGDPMedio.singleRequest&&o?((0,_logger.showLog)("Advertising:pintaListaPosiciones:There is prioritized positions and SingleRequest is enabled -> get with Roadblock"),window.customcmd.push(function(){var o,i,n;n=null,e.forEach(function(e){return o={position:e},_configManager.existePosEnConfigGDPMedio(e)?_configManager.isActive(o)?(i=$("[data-voc-vam-position = '"+e+"']",_configManager.context$),i.length?(o=_configManager.normalizaParams(i),null===n&&(n=o)):(i=$("#"+_configManager.getIdDiv(o)),i.length?(o=_configManager.normalizaParams(o),null===n&&(n=o)):(0,_logger.showWarn)("En pintaListaPosiciones. No existe el DIV de la posicion priorizada "+e)),void("id"in o&&((0,_logger.showLog)("En pintaListaPosiciones. Llamando a defineSlot: "+JSON.stringify(o)),_defineSlot(o)))):void(0,_logger.showWarn)("Advertising:pintaListaPosiciones:SingleRequest position "+e+" is NOT active"):void(0,_logger.showWarn)("Advertising:pintaListaPosiciones:SingleRequest position "+e+" does not exist configGDPMedio")}),null===n?(0,_logger.showError)("ERROR En pintaListaPosiciones. No existe el DIV de ninguna de las posiciones priorizadas en la pagina, por lo que no se hara el display"):o=n,_providerManager2.default.isActive()?((0,_logger.showLog)("pintaListaPosiciones:Waiting for HB`s promises to be solved"),_application2.default.when(_constants.HEADER_BIDDING_READY).then(function(){(0,_logger.showLog)("pintaListaPosiciones:HB promises resolved"),_providerManager2.default.setTargetings(),(0,_logger.showLog)("pintaListaPosiciones:Params object",o),_display(o)})):((0,_logger.showLog)("En pintaListaPosiciones. Print without wait HB"),_display(o))})):(!_configManager.configGDPMedio.singleRequest&&(0,_logger.showLog)("Advertising:pintaListaPosiciones:SingleRequest DISABLED"),!o&&(0,_logger.showLog)("Advertising:pintaListaPosiciones:There are NOT prioritized positions"),e.forEach(function(e){var o,i,n;return _configManager.existePosEnConfigGDPMedio(e)?(o={position:e},_configManager.isActive(o)?(i=$("[data-voc-vam-position = '"+e+"']",_configManager.context$),i.length?o=_configManager.normalizaParams(i):(i=$("#"+_configManager.getIdDiv(o)),i.length&&(n=_configManager.normalizaParams(i)),o=n||_configManager.normalizaParams(o)),(0,_logger.showLog)("Advertising:pintaListaPosiciones:Calling printAds with",o),void Advertising.printAds(o)):void(0,_logger.showWarn)("Advertising:pintaListaPosiciones:Prioritized position "+e+" is NOT active")):void(0,_logger.showWarn)("Advertising:pintaListaPosiciones:Prioritized position "+e+" does not exist configGDPMedio")}))}function _displayDelayed(e){var o=_configManager.getIdDiv(e);$("#"+o).on("inview",function(i,n){(0,_logger.showLog)("Advertising:displayDelayed:INVIEW_EVENT trigger",e,i,n),n&&!this.dataset.vocVamDisplayed&&((0,_logger.showLog)("Advertising:displayDelayed:Painting delayed",o,e),_getAdGoogle(e,!1))})}function _getAdGoogle(e,o){if(!_configManager.configGDPMedio.activo)return void(0,_logger.showWarn)("Advertising:getAdGoogle:Ads was disabled in Media Config");(0,_logger.showLog)("Advertising:getAdGoogle:Queuing with",e),window.customcmd.push(function(){var i,n,t,a,r;if(!_configManager.existePosEnConfigGDPMedio(e.position))return void(0,_logger.showWarn)("Advertising:getAdGoogle:Position "+e.position+" does not exist in configGDPMedio");(0,_logger.showLog)("Advertising:getAdGoogle:googletag exec with",e),i=_configManager.getIdDiv(e),n=_getEventsPosition(e),t=e,t.pre_callback=n.pre_callback,t.pre_event=n.pre_event,t.post_callback=n.post_callback,t.post_event=n.post_event,(0,_logger.showLog)("Advertising:getAdGoogle:Set params to DIV with id = ",i),$("#"+i).data("params",t),a=_getClavePosicionInsertada(e),_insertedPositions[a]?((0,_logger.showLog)("Advertising:getAdGoogle:Position "+e.position+" has already been previously invoked. Checking the value of the refresh parameter",e.refresh),e.refresh&&_pintarPosicionRefresh(e)):(r=!1,e.defineSlot&&((0,_logger.showLog)("Advertising:getAdGoogle:defineSlot",e),_defineSlot(e),o?((0,_logger.showLog)("Advertising:getAdGoogle:Is prioritized",e),_providerManager2.default.isActive()&&(r=!0,(0,_logger.showLog)("Advertising:getAdGoogle:Waiting for HB`s promises to be solved"),_application2.default.when(_constants.HEADER_BIDDING_READY).then(function(){(0,_logger.showLog)("Advertising:getAdGoogle:HB promises resolved on prioritized position with",e),_providerManager2.default.setTargetings(),_display(e)}))):((0,_logger.showLog)("Advertising:getAdGoogle:It is not prioritized",e),n.pre_callback&&!n.pre_event?n.pre_callback():n.pre_event?((0,_logger.showLog)("Advertising:getAdGoogle:Has pre-event",e),r=!0,_application2.default.one(n.pre_event,e,function(){_providerManager2.default.isActive()&&((0,_logger.showLog)("Advertising:getAdGoogle:Waiting for HB`s promises to be solved"),_application2.default.when(_constants.HEADER_BIDDING_READY).then(function(){(0,_logger.showLog)("Advertising:getAdGoogle:HB promises resolved with preEvents",e),e.pre_callback&&e.pre_callback(),_providerManager2.default.setTargetings(),_display(e)}))})):((0,_logger.showLog)("Advertising:getAdGoogle:Has NO pre-event",e),_providerManager2.default.isActive()&&(r=!0,(0,_logger.showLog)("Advertising:getAdGoogle:Waiting for HB`s promises to be solved"),_application2.default.when(_constants.HEADER_BIDDING_READY).then(function(){(0,_logger.showLog)("Advertising:getAdGoogle:HB promises resolved without preEvents with",e),e.pre_callback&&e.pre_callback(),_providerManager2.default.setTargetings(),_display(e)}))))),r||((0,_logger.showLog)("Advertising:getAdGoogle:Has no pre-event. Painting",e),_providerManager2.default.setTargetings(),_display(e)))})}function _getEventsPosition(e){var o,i;return o=_configManager.deviceType,i=_application2.default.lookup("posicion_"+o+'["'+e.position+'"]',_configManager.configGDP),(0,_utils.isEmpty)(i)?i:(i.pre_callback=e.pre_callback||e.pre_callback,i.pre_event=e.pre_event||e.pre_event,i.post_callback=e.post_callback||e.post_callback,i.post_event=e.post_event||e.post_event,i)}function _getNombreSlot(e){var o,i,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o=_configManager.dynamicId,i=o&&n?"_"+o:"","slot_"+e.position.replace("-","_")+i}function _getClavePosicionInsertada(e){return _getNombreSlot(e)+"_"+_configManager.getIdDiv(e)}function _pintarPosicionRefresh(e){(0,_logger.showLog)("En pintarPosicionRefresh. Refrescamos la posicion "+e.position),window.googletag.pubads().refresh([_application2.default.lookup(_getNombreSlot(e))])}function _infoSlotRender(e,o){var i,n,t,a,r,s,d,c,g,l;if(i=_configManager.getIdDiv(e),n=$("#"+i),t=$("#"+i+" div iframe").width(),a=$("#"+i+" div iframe").height(),o)n.empty();else{try{a=150,t=150,r=_configManager.getSizesGoogle(e.position),r&&r.indexOf("fluid")<0&&(s=JSON.parse(r),Array.isArray(s[0])?(t=s[0][0],a=s[0][1]):(t=s[0],a=s[1]))}catch(e){(0,_logger.showError)("Advertising:infoSlotRender:Error building size.",e)}n.show()}if(n.addClass("gdp_infoSlot_rectangle").html('<div><p style="width: '+t+"px; height: "+a+'px;">'+e.position+" "+_infoSlotFormateaDimensiones(e)+"</p></div>"),_isLocalPosition(e)&&n.addClass("gdp_infoSlot_localPosition"),o||n.addClass("gdp_infoSlot_inactive"),!$("#gdp_infoSlot_tableInfo").length>0&&$("body").append('<div class="display" id="gdp_infoSlot_tableInfo"></div>'),_infoSlotRenderSlots(e),_infoSlotRenderTopics(),_infoSlotRenderOAS(e),d=$("#gdp_infoSlot_tableInfo-slots").length>0?$("#gdp_infoSlot_tableInfo-slots tbody tr").length:0,c=$("#gdp_infoSlot_tableInfo-topics").length>0?$("#gdp_infoSlot_tableInfo-topics tbody tr").length:0,g=$("#gdp_infoSlot_tableInfo-oas").length>0?$("#gdp_infoSlot_tableInfo-oas tbody tr").length:0,(l=Math.max(d,c))>d&&$("#gdp_infoSlot_tableInfo-slots").length>0)for(var p=0;p<l-d;p++)$("#gdp_infoSlot_tableInfo-slots tbody").append("<tr><td>&nbsp;</td></tr>");if(l>c&&$("#gdp_infoSlot_tableInfo-topics").length>0)for(var f=0;f<l-c;f++)$("#gdp_infoSlot_tableInfo-topics tbody").append("<tr><td>&nbsp;</td></tr>");if(l>g&&$("#gdp_infoSlot_tableInfo-oas").length>0)for(var u=0;u<l-g;u++)$("#gdp_infoSlot_tableInfo-oas tbody").append("<tr><td>&nbsp;</td></tr>")}function _applyFilter(e){return e.replace(new RegExp("'fluid'","g"),"[fluid]").replace(new RegExp("\\],\\[","g"),"_").replace(new RegExp(",","g"),"x").replace(new RegExp("\\[","g"),"").replace(new RegExp("\\]","g"),"").replace(new RegExp("_","g"),",")}function _infoSlotFormateaDimensiones(e){var o,i,n,t,a,r,s;o="",i=[],n={},t="";try{e.outOfPage?i.push("oop"):e.responsive&&Array.isArray(e.responsive)&&e.responsive.length>0?(n=_getSizeMapping(e),t=void 0!==n&&void 0!==n.definition?n.definition:"",t.split(".").forEach(function(e){e.indexOf("addSize")>-1&&(e=e.replace(new RegExp("addSize\\(","g"),"").replace(new RegExp("\\)","g"),""),i.push(e))})):i.push(_application2.default.lookup("posicion_"+_configManager.deviceType+'["'+e.position+'"].dimensiones',_configManager.configGDPMedio)),Array.isArray(i)&&(e.outOfPage?o+="(oop)":e.responsive?(s=new Set,i.forEach(function(e){var i=_applyFilter(e);r=i.substring(0,i.indexOf(",")),a=i.substring(i.indexOf(",")+1),s.add(a),o+="<br>"+r+": ("+a+")"}),1===s.size&&(o="("+a+")")):(a=_applyFilter(i[0]),o+="("+a+")"))}catch(e){(0,_logger.showError)("Advertising:infoSlotFormateaDimensiones:Error",e)}return o}function _infoSlotRenderSlots(e){$("#gdp_infoSlot_tableInfo-slots").length||($("#gdp_infoSlot_tableInfo").append('<table cellpadding="0" cellspacing="0" border="1" class="display" id="gdp_infoSlot_tableInfo-slots"><thead></thead><tbody></tbody></table>'),$("#gdp_infoSlot_tableInfo-slots thead").append("<th>posiciones</th>")),$("#gdp_infoSlot_tableInfo-slots tbody").append("<tr><td>"+e.position+"</td></tr>")}function _infoSlotRenderTopics(){var e=_getTopics(!0);e.length>0&&($("#gdp_infoSlot_tableInfo-topics").length||($("#gdp_infoSlot_tableInfo").append('<table cellpadding="0" cellspacing="0" border="1" class="display" id="gdp_infoSlot_tableInfo-topics" ><thead></thead><tbody></tbody></table>'),$("#gdp_infoSlot_tableInfo-topics thead").append("<th>topics</th>"),e.forEach(function(e){$("#gdp_infoSlot_tableInfo-topics tbody").append("<tr><td>"+e+"</td></tr>")})))}function _infoSlotRenderOAS(e){$("#gdp_infoSlot_tableInfo-oas").length||($("#gdp_infoSlot_tableInfo").append('<table cellpadding="0" cellspacing="0" border="1" class="display" id="gdp_infoSlot_tableInfo-oas"><thead></thead><tbody></tbody></table>'),$("#gdp_infoSlot_tableInfo-oas thead").append("<th>oas</th>"),$("#gdp_infoSlot_tableInfo-oas tbody").append("<tr><td>"+_configManager.getOasSitepage(e)+"</td></tr>"))}function _getTopics(e){var o=[];return(_configManager.configGDPMedio.enableTopics||e)&&window.voc_top&&(o=window.voc_top.split(",")),o}function _isLocalPosition(e){return e.position.includes("_local")}function _capturadorExistsPreview(e){return _configManager.capturadorDataPreview&&_configManager.capturadorDataPreview[e.position]}function _capturadorSetPreview(e){var o,i,n,t,a;try{o=JSON.parse(_configManager.capturadorDataPreview[e.position]),i=o[0],n=_configManager.getIdDiv(e),a='<iframe id="'+n+'-iframe" name="'+i.name+'" src="'+i.previewUrl+'" width="'+i.size.width+'" height="'+i.size.height+'" scrolling="no" frameborder="0"></iframe>',t=$("#"+n),t.empty(),t.html(a),(0,_logger.showLog)("En capturadorSetPreview. Pintada preview para la posicion "+e.position)}catch(e){(0,_logger.showError)("Advertising:capturadorSetPreview:Error",e)}}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,o){for(var i=0;i<o.length;i++){var n=o[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(o,i,n){return i&&e(o.prototype,i),n&&e(o,n),o}}(),_package=__webpack_require__(8),_providerManager=__webpack_require__(29),_providerManager2=_interopRequireDefault(_providerManager),_application=__webpack_require__(2),_application2=_interopRequireDefault(_application),_configManager4=__webpack_require__(9),_configManager5=_interopRequireDefault(_configManager4),_utils=__webpack_require__(4),_logger=__webpack_require__(1),_constants=__webpack_require__(0),_configManager=null,_standardDelayed=[],_gptInitialized=!1,_insertedPositions={},_notDisplayedSlots=[],_completadasPriorizadas=!1,_reload=!1,Advertising=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(e,o,i){var n,t;if(_configManager=null,_standardDelayed=[],_gptInitialized=!1,_insertedPositions={},_notDisplayedSlots=[],_completadasPriorizadas=!1,_reload=o,_configManager=e,_configManager.context$=i,_configManager.checkConfigFromURL(),!_configManager.configGDPMedio.activo)return void(0,_logger.showWarn)("Advertising:init:The advertising has been deactivated in the configuration of the medium!");(0,_logger.showLog)("Advertising:init:deviceType: "+_configManager.deviceType+" , pageType: "+_configManager.pageType+" , (Version "+_package.version+")"),_reload||_configManager.processConfig(),_reload||((0,_logger.showLog)("init:HeaderBidding init"),_providerManager2.default.init(_configManager.configGDPMedio),(0,_utils.cargaLibreriaGPT)()),window.customcmd.push(function(){window.googletag.pubads().collapseEmptyDivs(),n=_application2.default.lookup("Krux.vocento.segments"),t=_application2.default.lookup("Krux.vocento.user"),_configManager.configGDPMedio.enableKrux&&["object","undefined"].indexOf(void 0===n?"undefined":_typeof(n))<0&&["object","undefined"].indexOf(void 0===t?"undefined":_typeof(t))<0&&(window.googletag.pubads().setTargeting("ksg",window.Krux.vocento.segments),window.googletag.pubads().setTargeting("kuid",window.Krux.vocento.user)),_configManager.configGDPMedio.singleRequest&&window.googletag.pubads().enableSingleRequest(),_configManager.configGDPMedio.syncRendering&&window.googletag.pubads().enableSyncRendering(),window.googletag.enableServices(),(0,_logger.showLog)("En constructor. Disparamos evento "+_constants.GPT_READY),_application2.default.trigger(_constants.GPT_READY),_gptInitialized=!0}),setTimeout(function(){_gptInitialized||((0,_logger.showWarn)("Advertising:init:Trigger event "+_constants.GPT_READY+" after "+_constants.GPT_TIMEOUT),_application2.default.trigger(_constants.GPT_READY))},_constants.GPT_TIMEOUT),_configManager.checkExceptions(),window.customcmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){var o,i,n,t,a;o=e.slot.getSlotElementId(),i=e.slot.getTargeting("pos"),n=$("#"+o),t=n.data("params"),a=-1,e.isEmpty?((0,_logger.showLog)("En constructor. slotRenderEnded. La posicion "+i+" isEmpty"),n.trigger(_constants.SLOT_EMPTY),_configManager.configGDPMedio.infoSlot&&_infoSlotRender(t,!1)):((0,_logger.showLog)("En constructor. slotRenderEnded. La posicion "+i+" ha sido pintada en el DIV "+o),n.trigger(_constants.SLOT_RENDERED),_configManager.configGDPMedio.infoSlot&&_infoSlotRender(t,!0)),n.get(0).dataset.vocVamDisplayed=!0,t&&(t.post_callback&&((0,_logger.showLog)("En constructor. slotRenderEnded. La posicion "+i+" tiene el siguiente postCallback: "+t.post_callback),t.post_callback()),t.post_event&&((0,_logger.showLog)("En constructor. slotRenderEnded. La posicion "+i+" tiene el siguiente postEvent: "+t.post_event),_application2.default.trigger(t.post_event))),_configManager.removePrioritizedPosition(),_configManager.thereArePrioritizedPositions()&&_standardDelayed.length&&!_configManager.isPrioritized(t)&&_standardDelayed.find(function(e){return a++,e.position===i[0]})&&_standardDelayed.splice(a,1),_completadasPriorizadas||_configManager.thereArePrioritizedPositions()||(_completadasPriorizadas=!0,_displayStandarQueued())}),window.googletag.pubads().addEventListener("impressionViewable",function(e){var o=e.slot.getSlotElementId(),i=e.slot.getTargeting("pos"),n=$("#"+o);(0,_logger.showLog)("En constructor. impressionViewable. La posicion "+i+" es visible"),n.trigger(_constants.SLOT_VIEWABLE)})}),_configManager.thereArePrioritizedPositions()&&(_displayPrioritized(),setTimeout(function(){_standardDelayed.length&&((0,_logger.showWarn)("Advertising:init:Display queued positions after "+_constants.TIMEOUT_POSICIONES_ESTANDAR),_completadasPriorizadas=!0,_displayStandarQueued())},_constants.TIMEOUT_POSICIONES_ESTANDAR))}},{key:"printAds",value:function(e){var o,i,n,t,a;if((0,_logger.showLog)("Advertising:printAds",e),!_configManager.configGDPMedio.activo)return void(0,_logger.showWarn)("Advertising:printAds:Ads was be disabled in Media Config");if(null===(o=_configManager.normalizaParams(e)))return void(0,_logger.showWarn)("Advertising:printAds:Empty params",e);if(i=o.position,n=_configManager.getIdDiv(o),!_configManager.isActive(o))return $("#"+n).length&&o.hideNoAds&&((0,_logger.showWarn)("Advertising:printAds:Hiding ADs DIV container if hideNoAds is anabled",o),$("#"+n).hide()),void(0,_logger.showWarn)("Advertising:printAds:Position "+i+" is not active",o);if(!$("#"+n).length)return void(0,_logger.showWarn)("Advertising:printAds:DIV with ID "+n+" does not exist",o);if("google"===o.serverType){if(_configManager.configGDPMedio.preview&&_capturadorExistsPreview(o))return(0,_logger.showLog)("Advertising:printAds:Preview mode. Getting form grabber service"),void _capturadorSetPreview(o);(0,_logger.showLog)("Advertising:printAds:Check Ad-Type",o),t=_configManager.isPrioritized(i),a=_configManager.isDelayed(i),t&&!a?((0,_logger.showLog)("Advertising:printAds:Painting prioritized",o),_getAdGoogle(o,!0)):a?((0,_logger.showLog)("Advertising:printAds:Wait for INVIEW event delayed",o),_displayDelayed(o)):!_configManager.thereArePrioritizedPositions()||_completadasPriorizadas?((0,_logger.showLog)("Advertising:printAds:Painting standard",o),_getAdGoogle(o,!1)):((0,_logger.showLog)("Advertising:printAds:Painting queued standards",o),_standardDelayed.push(o))}else(0,_logger.showWarn)("Advertising:printAds:ServerType is different from google",o)}},{key:"getValueUser",value:function(){if(!_configManager)throw Error("Advertising:getValueUser:Config object not initialized");return _configManager.valueUserType}},{key:"getSizesGoogle",value:function(){var e;if(!_configManager)throw Error("Advertising:getSizesGoogle:Config object not initialized");return(e=_configManager).getSizesGoogle.apply(e,arguments)}},{key:"getOasSitepage",value:function(){var e;if(!_configManager)throw Error("Advertising:getOasSitepage:Config object not initialized");return(e=_configManager).getOasSitepage.apply(e,arguments)}}]),e}();exports.default=Advertising},29:function(e,o,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function t(e){var o=this;v=[],f.forEach(function(i){i.isActive(e)&&((0,l.showLog)("HBManager:loadActivesGateways:Add promise",i.NAME),v.push(i),o.push(i.getLoadPromise(e)))})}Object.defineProperty(o,"__esModule",{value:!0});var a=i(2),r=n(a),s=i(30),d=n(s),c=i(32),g=n(c),l=i(1),p=i(0),f=[d.default,g.default],u=window,h=u.RSVP,_=[],v=[];window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.customcmd=window.customcmd||[],o.default=Object.preventExtensions({init:function(e){return _=[],t.call(_,e),h.all(_).then(function(){(0,l.showLog)("HBManager:init:All gateways have finished"),r.default.promised(p.HEADER_BIDDING_READY,!0)}).catch(function(e){(0,l.showError)("HBManager:init:Error in gateways",e),r.default.promised(p.HEADER_BIDDING_READY,!1)})},setTargetings:function(){(0,l.showLog)("HBManager:setTargetings:Setting targetings for each added gateways"),v.forEach(function(e){e.setTargetings()})},isActive:function(){return _.length}})},30:function(e,o,i){"use strict";function n(){return(0,d.showLog)("Amazon:loadLibrary:Loading library"),s.default.load(c.AMAZON_URL).catch(function(e){return(0,d.showError)("Amazon:loadLibrary:Error",e),f.reject(l.ERROR_LOAD_LIBRARY)})}function t(){return new f.Promise(function(e,o){(0,d.showLog)("Amazon:setConfig:Show Amazon config",c.AMAZON_CONFIG);try{window.apstag.init(c.AMAZON_CONFIG,function(){e()})}catch(e){(0,d.showError)("Amazon:setConfig:Error",e),o(l.ERROR_INIT_CONFIG)}})}function a(e){var o;return o={slots:e.slots,timeout:e.timeout||c.DEFAULT_AMAZON_LOAD_TIMEOUT},new f.Promise(function(e,i){(0,d.showLog)("Amazon:fetchBid:Add Slots",o.slots),(0,d.showLog)("Amazon:fetchBid:Request Amazon"),window.apstag.fetchBids(o,function(o){if((0,d.showLog)("Amazon:fetchBid:Response from Amazon",o),0===Object.keys(o).length)return void i(l.TIMEOUT_REACHED_FETCH_BIDS);(0,d.showLog)("Amazon:fetchBid:Targetings keys",window.apstag.targetingKeys()),g=!0,e()})})}Object.defineProperty(o,"__esModule",{value:!0});var r=i(2),s=function(e){return e&&e.__esModule?e:{default:e}}(r),d=i(1),c=i(0);i(31);var g=!1,l={ERROR_LOAD_LIBRARY:"ERROR_LOAD_LIBRARY",TIMEOUT_REACHED_GLOBAL:"TIMEOUT_REACHED_GLOBAL",TIMEOUT_REACHED_FETCH_BIDS:"TIMEOUT_REACHED_FETCH_BIDS",ERROR_INIT_CONFIG:"ERROR_INIT_CONFIG"},p=window,f=p.RSVP;o.default=Object.preventExtensions({NAME:"AMAZON",isActive:function(e){var o=e.hbAmazon;return o?(0,d.showLog)("Amazon:Is active"):(0,d.showLog)("Amazon:Is NOT active"),o},getLoadPromise:function(e){var o=e.hbAmazon;return new f.Promise(function(e,i){var r=o.timeout||c.DEFAULT_AMAZON_LOAD_TIMEOUT;g=!1,n().then(function(){return(0,d.showLog)("Amazon:getLoadPromise:Library loaded"),t()}).then(function(){return(0,d.showLog)("Amazon:getLoadPromise:apstag is loaded"),a(o)}).then(function(){(0,d.showLog)("Amazon:getLoadPromise:Bids fetched"),e(!0)}).catch(function(e){i(e)}),setTimeout(function(){g||((0,d.showWarn)("Amazon:getLoadPromise:Timeout reached",r),i(l.TIMEOUT_REACHED_GLOBAL))},r)}).catch(function(e){switch(e){case l.TIMEOUT_REACHED_GLOBAL:(0,d.showLog)("Amazon:getLoadPromise:TIMEOUT reached global");break;case l.TIMEOUT_REACHED_FETCH_BIDS:(0,d.showLog)("Amazon:getLoadPromise:TIMEOUT reached in _fetchBid");break;case l.ERROR_LOAD_LIBRARY:(0,d.showError)("Amazon:getLoadPromise:Error loading library");break;case l.ERROR_INIT_CONFIG:(0,d.showError)("Amazon:getLoadPromise:Error on init config");break;default:(0,d.showError)("Amazon:getLoadPromise:Error in Amazon process",e)}return!1})},setTargetings:function(){g?window.customcmd.push(function(){window.apstag.setDisplayBids(),(0,d.showLog)("Amazon:setTargetings:Targetings added")}):(0,d.showLog)("Amazon:setTargetings:Targetings NOT added because no response from bidders")}})},31:function(e,o,i){"use strict";!function(e,o){function i(i,n){o[e]._Q.push([i,n])}o[e]||(o[e]={init:function(){i("i",arguments)},fetchBids:function(){i("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]})}("apstag",window)},32:function(e,o,i){"use strict";function n(){return(0,c.showLog)("Prebid:loadLibrary:Loading library"),d.default.load(g.PREBID_URL).catch(function(e){return(0,c.showError)("Prebid:loadLibrary",e),f.reject(l.ERROR_LOAD_LIBRARY)})}function t(e){var o,i;o=e.biddersConfig,i={debug:g.SHOW_LOGS,enableSendAllBids:e.enableSendAllBids||!0,priceGranularity:"dense"},(0,c.showLog)("Prebid:setConfig:biddersConfig",o),window.pbjs.bidderSettings=r(o),window.pbjs.setConfig(i),(0,c.showLog)("Prebid:setConfig:Show Prebid config",window.pbjs.getConfig())}function a(e){var o,i;return o=e.adUnits,i=e.timeout||g.DEFAULT_PREBID_LOAD_TIMEOUT,new f.Promise(function(e,n){if(!o.length)return(0,c.showLog)("Prebid:fetchBid:There are not adUnits"),void n(l.EMPTY_ADUNITS);window.pbjs.que.push(function(){(0,c.showLog)("Prebid:fetchBid:Add adUnits",o),window.pbjs.addAdUnits(o),(0,c.showLog)("Prebid:fetchBid:Request Prebid"),window.pbjs.requestBids({timeout:i,bidsBackHandler:function(o){if((0,c.showLog)("Prebid:fetchBid:Response from Prebid",o),0===Object.keys(o).length)return void n(l.TIMEOUT_REACHED_FETCH_BIDS);(0,c.showLog)("Prebid:fetchBid:Targetings",window.pbjs.getAdserverTargeting()),u=!0,e()}})})})}function r(e){var o={};return Object.keys(e).forEach(function(i){o[i]={bidCpmAdjustment:function(o,n){var t;return t=1-("percent"in e[i]?e[i].percent/100:0),(0,c.showLog)("Prebid:fetchBiddersSettings:bidCpmAdjustment Bidder is:",n.bidderCode,"with percent:",t),o*t}}}),o}Object.defineProperty(o,"__esModule",{value:!0});var s=i(2),d=function(e){return e&&e.__esModule?e:{default:e}}(s),c=i(1),g=i(0),l={EMPTY_ADUNITS:"EMPTY_ADUNITS",ERROR_LOAD_LIBRARY:"ERROR_LOAD_LIBRARY",TIMEOUT_REACHED_GLOBAL:"TIMEOUT_REACHED_GLOBAL",TIMEOUT_REACHED_FETCH_BIDS:"TIMEOUT_REACHED_FETCH_BIDS"},p=window,f=p.RSVP,u=!1;window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],o.default=Object.preventExtensions({NAME:"PREBID",isActive:function(e){var o=e.hbPrebid;return o?(0,c.showLog)("Prebid:Is active"):(0,c.showLog)("Prebid:Is NOT active"),o},getLoadPromise:function(e){var o=e.hbPrebid;return u=!1,new f.Promise(function(e,i){var r=o.timeout||g.DEFAULT_PREBID_LOAD_TIMEOUT;n().then(function(){return(0,c.showLog)("Prebid:getLoadPromise:Library loaded"),t(o),a(o)}).then(function(){(0,c.showLog)("Prebid:getLoadPromise:Bids fetched"),e(!0)}).catch(function(e){i(e)}),setTimeout(function(){u||((0,c.showWarn)("Prebid:getLoadPromise:Timeout reached",r),i(l.TIMEOUT_REACHED_GLOBAL))},r)}).catch(function(e){switch(e){case l.TIMEOUT_REACHED_GLOBAL:(0,c.showLog)("Prebid:getLoadPromise:TIMEOUT reached global");break;case l.TIMEOUT_REACHED_FETCH_BIDS:(0,c.showLog)("Prebid:getLoadPromise:TIMEOUT reached in _fetchBid");break;case l.ERROR_LOAD_LIBRARY:(0,c.showError)("Prebid:getLoadPromise:Error loading library",e);break;case l.EMPTY_ADUNITS:(0,c.showError)("Prebid:getLoadPromise:There are not adUnits");break;default:(0,c.showError)("Prebid:getLoadPromise:Error in Prebid process",e)}return!1})},setTargetings:function(){u?window.customcmd.push(function(){window.pbjs.que.push(function(){window.pbjs.setTargetingForGPTAsync(),(0,c.showLog)("Prebid:setTargetings:Targetings added")})}):(0,c.showLog)("Prebid:setTargetings:Targetings NOT added because no response from bidders")}})},33:function(e,o,i){"use strict";function n(e){var o,i,n,t,a=e.configGDPMedio.headerBidding;return(0,s.showLog)("HBConfigManager:processPrebidConfig:Process Prebid config"),a?(o="adUnits_"+e.deviceType)in a&&a[o].length?(t=[],"disabled"in a.biddersConfig&&(t=a.biddersConfig.disabled.map(function(e){return e.trim()})),i=[],a[o].forEach(function(o){var n,a=[];return n=o.code.replace(new RegExp("("+r.OLD_PREFIX+"|"+r.NEW_SUFFIX+")","g"),""),e.existePosEnConfigGDPMedio(n)?e.isActive({position:n})?(o.code+=e.dynamicId?"-"+e.dynamicId:"",t.length?o.bids.forEach(function(e){t.indexOf(e.bidder)<0&&a.push(e)}):a=o.bids,a.length?(o.bids=a,void i.push(o)):void(0,s.showWarn)("HBConfigManager:processPrebidConfig:Remove adUnit "+o.code+" because all bidders are disabled")):void(0,s.showWarn)("HBConfigManager:processPrebidConfig:Position "+n+" is not active"):void(0,s.showWarn)("HBConfigManager:processPrebidConfig:Position "+n+" does not exists in configGDPMedio")}),n={adUnits:i,biddersConfig:a.biddersConfig,enableSendAllBids:a.enableSendAllBids,timeout:a.timeout||r.DEFAULT_PREBID_LOAD_TIMEOUT},delete e.configGDPMedio.headerBidding,void(e.configGDPMedio.hbPrebid=n)):((0,s.showLog)("HBConfigManager:processPrebidConfig:There are not bidders to device type",e.deviceType),void(e.configGDPMedio.hbPrebid=null)):((0,s.showLog)("HBConfigManager:processPrebidConfig:There are not Prebid configuration"),void(e.configGDPMedio.hbPrebid=null))}function t(e){var o,i,n,t=e.configGDPMedio.hbAmazon;return t?(o="slots_"+e.deviceType)in t&&t[o].length?(i=[],t[o].forEach(function(o){var n;return n=o.slotID.replace(new RegExp("("+r.OLD_PREFIX+"|"+r.NEW_SUFFIX+")","g"),""),e.existePosEnConfigGDPMedio(n)?e.isActive({position:n})?(o.slotName=a(e,n),o.slotID+=e.dynamicId?"-"+e.dynamicId:"",void i.push(o)):void(0,s.showWarn)("HBConfigManager:processAmazonConfig:Position "+n+" is not active"):void(0,s.showWarn)("HBConfigManager:processAmazonConfig:Position "+n+" does not exists in configGDPMedio")}),n={slots:i,timeout:t.timeout||r.DEFAULT_AMAZON_LOAD_TIMEOUT},void(e.configGDPMedio.hbAmazon=n)):((0,s.showLog)("HBConfigManager:processAmazonConfig:There are not slots to device type",e.deviceType),void(e.configGDPMedio.hbAmazon=null)):((0,s.showLog)("HBConfigManager:processAmazonConfig:There are not Amazon configuration"),void(e.configGDPMedio.hbAmazon=null))}function a(e,o){var i,n=$("[data-voc-vam-position = '"+o+"']",e.context$);return i=n.length?e.normalizaParams(n):e.normalizaParams({position:o}),e.getOasSitepage(i)}Object.defineProperty(o,"__esModule",{value:!0});var r=i(0),s=i(1);o.default=Object.preventExtensions({processConfig:function(e){(0,s.showLog)("HBConfigManager:processConfig:Process HB config"),n(e),t(e)}})},4:function(e,o,i){"use strict";function n(e){return!("object"===(void 0===e?"undefined":g(e))&&Object.keys(e).length||"object"!==(void 0===e?"undefined":g(e))&&void 0!==e)}function t(e){var o,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return e=e.replace(/[[\]]/g,"\\$&"),o=new RegExp("[?&]"+e+"(=([^&#]+)|&|#|$)"),i=o.exec(n),i&&i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):""}function a(e){var o,i,n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n=e.split("?").shift(),Object.hasOwnProperty.call(f,n))return f[n];switch(t.type=t.type||"script",i=document.createElement(t.type),t.type){case"link":i.type="text/css",i.rel="stylesheet",i.href=e;break;case"script":default:i.type="text/javascript",i.src=e,i.async=!0,t.text&&(i.text=t.text)}return o=new window.RSVP.Promise(function(e,o){i.onload=function(){return e(i)},i.onerror=o,document.head.appendChild(i)}),f[n]=o,o}function r(){var e,o,i;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.customcmd=window.customcmd||[];try{0===$("script[src*='"+p.GPT_URL+"']").length&&(e=document.createElement("script"),e.async=!0,e.type="text/javascript",o="https:"===document.location.protocol,e.src=(o?"https:":"http:")+"//"+p.GPT_URL,i=document.getElementsByTagName("script")[0],i.parentNode.insertBefore(e,i),window.googletag.cmd.push(function(){var e;for((0,l.showLog)("First function",window.customcmd.length);window.customcmd.length;)e=window.customcmd.splice(0,1)[0],window.googletag.cmd.push(e);(0,l.showLog)("Finish Pushing to googletag.cmd",window.customcmd.length),window.customcmd=window.googletag.cmd}))}catch(e){(0,l.showError)("Utils:cargaLibreriaGPT:Error loading GPT library")}}function s(){var e=arguments;return Object.keys(e).map(function(o){return e[o]}).forEach(function(o,i){0!==i&&Object.keys(o).forEach(function(i){e[0][i]=o[i]})}),e[0]}function d(e,o){return-1!==e.indexOf(o,e.length-o.length)}function c(e,o){return 0===e.indexOf(o)}Object.defineProperty(o,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.isEmpty=n,o.getParameterByName=t,o.load=a,o.cargaLibreriaGPT=r,o.extend=s,o.endsWith=d,o.startsWith=c;var l=i(1),p=i(0),f={}},7:function(e,o,i){"use strict";function n(e,o){Object.keys(o).forEach(function(i){e[i]=o[i]})}Object.defineProperty(o,"__esModule",{value:!0}),o.extend=n},79:function(e,o,i){e.exports=i(21)},8:function(e,o){e.exports={name:"vam",version:"3.10.1",description:"",main:"src/index.js",scripts:{test:"./node_modules/.bin/nyc ./node_modules/.bin/mocha-webpack tests/index.js --require jsdom-global/register --webpack-config webpack.test.js",tdd:"./node_modules/.bin/mocha-webpack tests/index.js --require jsdom-global/register --webpack-config webpack.test.js --watch",start:"./node_modules/.bin/webpack-dev-server --open --config webpack.dev.js",build:"./node_modules/.bin/webpack --optimize-minimize --config webpack.prod.js",prebid:'cd ./node_modules/prebid.js/ && npm install && "./node_modules/.bin/gulp" build --modules=../../src/header-bidding/prebid-modules.json && cd ../..'},contributors:["Jose Manuel Ortega <jmortega@vocento.com>","Ernesto V. <evladpereda@ces.vocento.com>","Iván Pérez <ivanperez@vocento.com>"],license:"SEE LICENSE IN LICENSE.md",devDependencies:{"babel-core":"^6.26.0","babel-eslint":"^8.0.1","babel-loader":"^7.1.2","babel-plugin-syntax-dynamic-import":"^6.18.0","babel-polyfill":"^6.16.0","babel-preset-env":"^1.6.1",chai:"^4.1.2",chalk:"^1.1.3","clean-webpack-plugin":"^0.1.17","copy-webpack-plugin":"^4.3.1","css-loader":"^0.28.4",eslint:"^4.7.2","eslint-config-airbnb-base":"^12.0.1","eslint-plugin-import":"^2.7.0","extract-text-webpack-plugin":"^1.0.1","file-loader":"^1.1.6","html-loader":"^0.5.5","html-webpack-plugin":"^2.30.1","json-loader":"^0.5.7",mocha:"^4.0.1","mocha-loader":"^1.0.0","mocha-phantomjs":"^4.1.0","mocha-webpack":"^1.0.1",nyc:"^11.4.1","style-loader":"^0.18.2",webpack:"^3.10.0","webpack-dev-server":"^2.9.7","webpack-merge":"^4.1.1","webpack-shell-plugin":"^0.5.0"},dependencies:{"jquery-inview":"^1.1.2","js-cookie":"^2.1.4","prebid.js":"^0.34.1","rijndael-js":"^1.0.0",rsvp:"^3.5.0"}}},9:function(e,o,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function t(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function a(){var e,o,i,n;return n="desktop",this.configGDPMedio.responsive.esResponsive?(i=parseInt(window.innerWidth,10),Object.keys(this.configGDPMedio.responsive).forEach(function(t){var a=this.configGDPMedio.responsive[t];"esResponsive"!==t&&(a.resolucionMaxima||a.resolucionMinima)&&(e=a.resolucionMaxima?a.resolucionMaxima:999999,o=a.resolucionMinima?a.resolucionMinima:0,i<=e&&i>o&&(n=t.replace("resolucion","").toLowerCase()))},this)):this.configGDPMedio&&this.configGDPMedio.tipoDispositivo&&(n=this.configGDPMedio.tipoDispositivo),n}function r(){return this.configGDPMedio.medio?this.configGDPMedio.medio:""}function s(){var e=r.call(this);return["abc","lavozdigital","abcdesevilla"].indexOf(e)>-1?d():"mujerhoy"===e?c():g()}function d(){var e,o,i,n,t,a,r,s;return e=/\/videos\/(.*)?\/\d{6}\/\d{2}\/((?!index.html).)*.html/,o=/_video.html/,o.exec(window.location.pathname)||e.exec(window.location.pathname)?"video":(i=/\/multimedia\/fotos\/(.*)?\/((?!index.html).)*.html/,n=/\/fotos-(.*)?\/\d{8}\/((?!index.html).)*.html/,t=/_galeria.html/,t.exec(window.location.pathname)||n.exec(window.location.pathname)||i.exec(window.location.pathname)?"galeria":(a=/\/multimedia\/(graficos\/(.)*|infografias)\/((?!index.html).)*.html/,a.exec(window.location.pathname)?"grafico":(r=/\d{8}\/(.*)?((?!index.html).)*.html/,s=/(_noticia.html|_directo.html)/,s.exec(window.location.pathname)||r.exec(window.location.pathname)?"noticia":"portada")))}function c(){var e,o,i,n,t,a,r,s,d,c;return e=/-vi.html/,o=/\/videos\/(.*)?\/\d{6}\/\d{2}\/.*-mm.html/,i=/\/videos\/\d{4}\/\d{2}\/\d{2}\/(.*).html/,(window.location.hostname.indexOf("blogs.")>-1?i.exec(window.location.pathname):e.exec(window.location.pathname)||o.exec(window.location.pathname))?"video":(n=/-ga.html/,t=/^\/galerias\/(.*)?\d{6}\/\d{2}\/.*-mm.html/,a=/\/galerias\/\d{4}\/\d{2}\/\d{2}\/(.*).html/,(window.location.hostname.indexOf("blogs.")>-1?a.exec(window.location.pathname):n.exec(window.location.pathname)||t.exec(window.location.pathname))?"galeria":(r=/\/\d{6}\/\d{2}\/((?!index.html).)*.html/,s=/\/\d{4}\/\d{2}\/\d{2}\/((?!index.html).)*.html/,d=/\/\d{6}\/((?!index.html).)*.html/,c=window.location.hostname.indexOf("blogs.")>-1?s.exec(window.location.pathname):window.location.hostname.indexOf("recetas.")>-1?d.exec(window.location.pathname):r.exec(window.location.pathname),c?"noticia":"portada"))}function g(){var e,o,i,n,t,a,r,s,d;return e=/-(vi|virc|vivo)(_amp)?.html/,o=/^\/videos\/(.*)?\/\d{6}\/\d{2}\/.*-mm.html/,e.exec(window.location.pathname)||o.exec(window.location.pathname)?"video":(i=/-(ga|garc|gavo|ft|ftrc|ftvo)(_amp)?.html/,n=/^\/fotos\/(.*)?\d{6}\/\d{2}\/.*-mm.html/,i.exec(window.location.pathname)||n.exec(window.location.pathname)?"galeria":(t=/-(nt|ntrc|ntvo)(_amp)?.html/,a=/\/\d{6}\/\d{2}\/((?!index.html).)*.html/,t.exec(window.location.pathname)||a.exec(window.location.pathname)?"noticia":(r=/-(in|inrc|invo)(_amp)?.html/,s=/^\/graficos\/(.*)?\/\d{6}\/\d{2}\/.*-mm.html/,d=/\/videochats\/((?!index.html).)\w+/,r.exec(window.location.pathname)||s.exec(window.location.pathname)||d.exec(window.location.pathname)?"noticia":"portada")))}function l(){return this.configGDPMedio.defineSlot||void 0}function p(e){var o,i="google";return o=D.default.lookup("posicion_"+this.deviceType+"."+e+".tipo",this.configGDPMedio),i=(0,L.isEmpty)(o)?i:o}function f(){var e=D.default.lookup("responsive.esResponsive",this.configGDPMedio);return!(0,L.isEmpty)(e)&&e}function u(e){return e.responsive&&Array.isArray(e.responsive)&&e.responsive.length?e.responsive:!!this.isResponsiveMedia&&h.call(this,e.position)}function h(e){var o,i,n,t,a,r,s;return(0,T.showLog)("ConfigManager:createResponsive:Build responsive for",e),o=[],this.configGDPMedio.dispositivos.forEach(function(d){if(this.existePosEnConfigGDPMedio(e,d)&&(i=D.default.lookup("responsive.resolucion"+d,this.configGDPMedio),!(0,L.isEmpty)(i)&&(n=i.resolucionMinima,t=i.resolucionMaxima,!(0,L.isEmpty)(n)&&!(0,L.isEmpty)(t)&&(n||t)))){a=[parseInt(n,10)||0,S.ALTOS_MINIMOS_DISPOSITIVOS[d]],r=this.getSizesGoogle(e,d);try{s=r&&r.indexOf("fluid")>-1?"fluid":JSON.parse(r)}catch(o){(0,T.showWarn)("ConfigManager:createResponsive:Processing position "+e+": "+o),s=r}o.push([a,s])}},this),o.sort(function(e,o){return e[0][0]-o[0][0]}),o.sort(function(e,o){return e[0][0]-o[0][0]}),(0,T.showLog)("ConfigManager:createResponsive:Build responsive param for position "+e,o),o}function _(){var e=D.default.lookup(S.EDITIONS_NAMESPACE);return e.current||e.main||""}function v(){var e,o,i;return e=window.location.href.indexOf("vam_preview")>-1?"vam_preview":"preview",o=S.CAPTURADOR_WS+"?id="+(0,L.getParameterByName)(e),i="",$.ajax({url:o,type:"POST",async:!1,success:function(e){i=e}}),i}function w(){return{suscriptor:"s",trial:"t",registrado:"r",anonimo:"a"}[D.default.getUserType()]||"a"}function m(){var e;return e=D.default.lookup("retrasadas."+this.deviceType+".listaPosiciones",this.configGDP),(0,L.isEmpty)(e)||!e.length?((0,T.showLog)("ConfigManager:getDelayed:There are NOT delayed positions"),[]):((0,T.showLog)("ConfigManager:getDelayed:There are delayed positions:",e),e=e.split(",").filter(function(e){return e.trim()}))}function b(){var e;return e=D.default.lookup("priorizadas."+this.deviceType+".listaPosiciones",this.configGDP),(0,L.isEmpty)(e)||!e.length?((0,T.showLog)("ConfigManager:getPrioritized:There are NOT prioritized positions"),[]):((0,T.showLog)("ConfigManager:getDelayed:There are prioritized positions:",e),e=e.split(",").filter(function(e){return e.trim()}))}function y(e){var o,i,n;return(0,T.showLog)("ConfigManager:decriptUrl:Actual prevUnencryptedCode",x,"and prevEncryptedCode",R),""===x&&""!==R&&(i=new e(S.MCRYPT_KEY,"cbc"),(0,T.showLog)("ConfigManager:decriptUrl:Decrypting",i),n=atob(R).split("").map(function(e){return e.charCodeAt(0)}),x="?"+i.decrypt(n,256,S.MCRYPT_KEY),(0,T.showLog)("ConfigManager:decriptUrl:",x),x=x.replace(/[^A-Za-z 0-9.,?""!@#$%^&*()\-_=+;:<>\/\\|}{[\]`~]*/g,""),((0,L.endsWith)(x,"&vam_cmvkey=")||(0,L.endsWith)(x,"&cmvkey="))&&(o=(0,L.endsWith)(x,"&vam_cmvkey=")?"&vam_cmvkey=":"&cmvkey=",x=x.replace(o,"")),(0,T.showLog)("ConfigManager:decriptUrl:String decrypted: "+x)),x}function P(){var e,o,i,n;return e=this.configGDPMedio.targetings?this.configGDPMedio.targetings:{},o=this.configGDP.targetings?this.configGDP.targetings:{},i={},(0,L.extend)(i,e,o),n="",Object.keys(i).forEach(function(e){n+='.setTargeting("'+e+'", "'+i[e]+'")'}),n}Object.defineProperty(o,"__esModule",{value:!0});var E=function(){function e(e,o){for(var i=0;i<o.length;i++){var n=o[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(o,i,n){return i&&e(o.prototype,i),n&&e(o,n),o}}(),A=i(33),M=n(A),O=i(2),D=n(O),L=i(4),T=i(1),S=i(0),I=-1,R="",x="",G=function(){function e(o,i){t(this,e),R="",x="",this.configGDPMedio=(0,L.extend)({},o),this.configGDP=(0,L.extend)({},i),this.deviceType=a.call(this),this.pageType=s.call(this),this.dynamicId=++I,this.context$=null,this.isResponsiveMedia=f.call(this),this.capturadorDataPreview="",this.valueUserType=w(),this.delayedPositions=m.call(this),this.prioritizedPositions=b.call(this),this.globalTargetings=P.call(this)}return E(e,[{key:"processConfig",value:function(){M.default.processConfig(this)}},{key:"isActive",value:function(e){var o,i,n,t;return"forceActivePosition"in this.configGDPMedio&&(this.configGDPMedio.forceActivePosition.indexOf("1")>-1||this.configGDPMedio.forceActivePosition.indexOf("all")>-1||this.configGDPMedio.forceActivePosition.indexOf(e.position)>-1)||(o=$("#"+this.getIdDiv(e)),i=D.default.lookup("posicion_"+this.deviceType+"."+e.position,this.configGDP),(0,L.isEmpty)(i)?((0,T.showLog)("ConfigManager:isActive:Position "+e.position+" is not active"),o.trigger(S.SLOT_INACTIVE),!1):i.desactivadoen&&i.desactivadoen.length&&""!==i.desactivadoen&&-1!==i.desactivadoen.indexOf(this.pageType)?((0,T.showLog)("ConfigManager:isActive:Position "+e.position+" is not active for the pageType "+this.pageType),o.trigger(S.SLOT_INACTIVE),!1):(t=Math.round(+new Date/1e3),!1,n=D.default.lookup("posicion_"+this.deviceType+"."+e.position+".programaciones",this.configGDP),!(!(0,L.isEmpty)(n)&&n.length&&!n.some(function(e){var o,i;return o=e.programacion?e.programacion.fecha_in:0,i=e.programacion?e.programacion.fecha_fin:0,(0===o||t>=o)&&(0===i||t<=i)}))||((0,T.showLog)("ConfigManager:isActive:Position "+e.position+" is not active for the current date"),o.trigger(S.SLOT_INACTIVE),!1)))}},{key:"getIdDiv",value:function(e){var o,i;return(0,T.showLog)("ConfigManager:getIdDiv:Dinamic ID",e.dynamicId,this.dynamicId),i=this.dynamicId?"-"+this.dynamicId:"",void 0!==e.dynamicId&&(i=e.dynamicId?"-"+e.dynamicId:""),e.id&&"string"==typeof e.id?((0,T.showLog)("ConfigManager:getIdDiv:With Id param",e),o=e.id.indexOf(S.OLD_PREFIX)>-1?e.id:""+S.OLD_PREFIX+e.id,$("#"+o).length||((0,T.showLog)("ConfigManager:getIdDiv:With Id param. Not found ID",o),o=e.id.indexOf(S.NEW_SUFFIX)>-1?e.id:""+e.id+S.NEW_SUFFIX),o+=(0,L.endsWith)(o,i)?"":i,(0,T.showLog)("ConfigManager:getIdDiv:With Id param. Id calculated",o)):((0,T.showLog)("ConfigManager:getIdDiv:No Id param",e),o=""+S.OLD_PREFIX+e.position,$("#"+o).length||((0,T.showLog)("ConfigManager:getIdDiv:No Id param. Not found ID",o),o=""+e.position+S.NEW_SUFFIX+i),(0,T.showLog)("ConfigManager:getIdDiv:No Id param. Id calculated",o)),o}},{key:"existePosEnConfigGDPMedio",value:function(e){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.deviceType;return!(0,L.isEmpty)(D.default.lookup("posicion_"+i+"."+e,this.configGDPMedio))||(o=this.getIdDiv({position:e}),$("#"+o).length&&$("#"+o).hide(),!1)}},{key:"normalizaParams",value:function(e){var o,i,n,t;return o={},e instanceof $?(0,L.extend)(o,S.DEFAULTS,{position:e.data("voc-vam-position")||null,serverType:e.data("voc-vam-servertype")||p.call(this,o.position),hideNoAds:e.data("voc-vam-hidenoads"),outOfPage:e.data("voc-vam-outofpage"),defineSlot:e.data("voc-vam-defineslot")||l.call(this),refresh:e.data("voc-vam-refresh"),responsive:e.data("voc-vam-responsive"),pre_callback:e.data("voc-vam-precallback")||"",pre_event:e.data("voc-vam-preevent")||"",post_callback:e.data("voc-vam-postcallback")||"",post_event:e.data("voc-vam-postevent")||"",oas:e.data("voc-vam-oas")||"",tags:e.data("voc-vam-tags"),dynamicId:this.dynamicId}):(0,L.extend)(o,S.DEFAULTS,{position:e.position||null,id:e.id||null,serverType:e.serverType||p.call(this,o.position),hideNoAds:e.hideNoAds,outOfPage:e.outOfPage,defineSlot:e.defineSlot||l.call(this),refresh:e.refresh,responsive:e.responsive,pre_callback:e.pre_callback||"",pre_event:e.pre_event||"",post_callback:e.post_callback||"",post_event:e.post_event||"",oas:e.oas||"",tags:e.tags,dynamicId:e.dynamicId||this.dynamicId}),null===o.position?((0,T.showWarn)("ConfigManager:normalizaParams:Position param is required",e),null):this.existePosEnConfigGDPMedio(o.position)?("boolean"!=typeof o.outOfPage&&(i=D.default.lookup("posicion_"+this.deviceType+"."+o.position+".outofpage",this.configGDPMedio),o.outOfPage=!(0,L.isEmpty)(i)&&"boolean"==typeof i&&i),n=this.getIdDiv(o),$("#"+n).length||!$("[data-voc-vam-position = '"+o.position+"']",this.context$).length||$("[data-voc-vam-position = '"+o.position+"']",this.context$).attr("id")||$("[data-voc-vam-position = '"+o.position+"']",this.context$).attr("id",n),o.id=n,o.tags||(o.tags=D.default.lookup("posicion_"+this.deviceType+"."+o.position+".targetings",this.configGDPMedio)||{}),t=D.default.lookup("posicion_"+this.deviceType+"."+o.position+".offset",this.configGDP),(0,L.isEmpty)(t)||($("#"+o.id).attr("data-offset",t),(0,T.showLog)("ConfigManager:normalizaParams:Offset "+t+" configurer for position: "+o.position)),o.outOfPage||o.responsive||!this.isResponsiveMedia||(o.responsive=u.call(this,o)),o):((0,T.showWarn)("ConfigManager:normalizaParams:Position "+o.position+" does not exists in configGDPMedio"),null)}},{key:"getOasSitepage",value:function(){var o,i,n,t,a,r,s,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.oas?o=d.oas.trim():(o=D.default.lookup("OAS."+this.deviceType+"."+this.pageType,this.configGDP),o=(0,L.isEmpty)(o)?"":o.trim());try{i=e.decryptedURL(),(window.location.href.indexOf("vam_adunit=")>-1||window.location.href.indexOf("adunit=")>-1||""!==i)&&(n=window.location.href.indexOf("vam_adunit=")>-1?"vam_adunit":"adunit",t=new RegExp("(\\?|&)"+n+"=([^?&]+)"),(a=""!==i?t.exec(i):t.exec(window.location.href))&&(o=a[2].indexOf("/"+S.GPT_ID_VOCENTO+"/")>-1?a[2]:"/"+S.GPT_ID_VOCENTO+"/"+a[2]))}catch(e){(0,T.showError)("ConfigManager:getOasSitepage:Error checking adUnit",e)}try{t=/{(\/)?edicion(\/)?}/,r=t.exec(o),r&&(s=_(),(0,L.startsWith)(r[0],"{/")&&s&&(s="/"+s),(0,L.endsWith)(r[0],"/}")&&s&&(s+="/"),o=o.replace(r[0],s))}catch(e){(0,T.showError)("ConfigManager:getOasSitepage:Error checking edition",e)}return void 0===this.configGDP.OAS.adunit&&(this.configGDP.OAS.adunit=o),o}},{key:"getSizesGoogle",value:function(e){var o,i,n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.deviceType;if(o=D.default.lookup("posicion_"+t+"."+e+".dimensiones",this.configGDPMedio),i=(0,L.isEmpty)(o)?"[]":o,n=l.call(this),i.indexOf("[fluid]")>-1){if(!n)return["fluid"];i=i.replace("[fluid]","'fluid'")}return n?i:JSON.parse(i)}},{key:"checkConfigFromURL",value:function(){var e,o,n;void 0!==window.location&&("headerBidding"in this.configGDPMedio&&window.location.href.indexOf("vam_prebid_disabled=")>-1&&(n=(0,L.getParameterByName)("vam_prebid_disabled",window.location.href).split(","),this.configGDPMedio.headerBidding.biddersConfig.disabled=n,n.indexOf("all")>-1&&(this.configGDPMedio.headerBidding=null)),"hbAmazon"in this.configGDPMedio&&(this.configGDPMedio.hbAmazon=!(window.location.href.indexOf("vam_amazon_disabled=1")>-1||window.location.href.indexOf("gdp_enableAmazonAds=0")>-1||!this.configGDPMedio.enableAmazonAds)&&this.configGDPMedio.hbAmazon),this.configGDPMedio.singleRequest=window.location.href.indexOf("vam_single_request=1")>-1||window.location.href.indexOf("gdp_singleRequest=1")>-1||this.configGDPMedio.singleRequest,this.configGDPMedio.syncRendering=window.location.href.indexOf("vam_sync_rendering=1")>-1||window.location.href.indexOf("gdp_syncRendering=1")>-1||this.configGDPMedio.syncRendering,this.configGDPMedio.enableKrux=window.location.href.indexOf("vam_krux=1")>-1||window.location.href.indexOf("gdp_enableKrux=1")>-1||this.configGDPMedio.enableKrux,this.configGDPMedio.forceActivePosition=window.location.href.indexOf("vam_force_positions=")>-1?(0,L.getParameterByName)("vam_force_positions",window.location.href).split(","):(0,L.getParameterByName)("gdp_forceActivePosition",window.location.href).split(","),this.configGDPMedio.infoSlot=window.location.href.indexOf("vam_info_slot=1")>-1||window.location.href.indexOf("gdp_infoSlot=1")>-1,this.configGDPMedio.infoSlot&&(0,L.load)(S.VAM_CSS_URL,{type:"link"}).then(function(){(0,T.showLog)("ConfigManager:checkConfigFromURL:CSS loaded",S.VAM_CSS_URL)}),this.configGDPMedio.preview=window.location.href.indexOf("vam_preview")>-1||window.location.href.indexOf("preview")>-1,this.configGDPMedio.preview&&((0,T.showLog)("ConfigManager:checkConfigFromURL:Detected capture mode. Call capture SW"),this.capturadorDataPreview=v(),this.configGDP.priorizadas={},this.configGDP.retrasadas={}),(window.location.href.indexOf("vam_code=")>-1||window.location.href.indexOf("code=")>-1)&&((0,T.showLog)("ConfigManager:checkConfigFromURL:Detected preview mode"),e=window.location.href.indexOf("vam_code=")>-1?"vam_code":"code",o=(0,L.getParameterByName)(e,window.location.href),R=decodeURI(o),this.configGDP.priorizadas={},this.configGDP.retrasadas={},""!==R&&i.e(0).then(i.bind(null,39)).then(function(e){(0,T.showLog)("ConfigManager:Rijndael library is loaded",e),y(e)})))}},{key:"checkExceptions",value:function(){var e,o,i,n;this.configGDPMedio.excepciones&&Object.keys(this.configGDPMedio.excepciones).length>0&&((0,T.showLog)("ConfigManager:checkExceptions:There are configured exceptions"),Object.keys(this.configGDPMedio.excepciones).forEach(function(t){"priorizadas"!==t&&"retrasadas"!==t&&(window.location.pathname===t||window.location.pathname.match(t))&&(e=this.configGDPMedio.excepciones[t],o=Math.round(new Date/1e3),i=e.fecha_in,n=e.fecha_fin,(0===i||i<=o)&&(0===n||o<=n)&&(this.configGDP=e,(0,T.showLog)('ConfigManager:checkExceptions:Applying the following exception:"'+t+'"')))},this))}},{key:"isDelayed",value:function(e){return this.thereAreDelayedPositions()&&this.delayedPositions.indexOf(e)>-1}},{key:"thereAreDelayedPositions",value:function(){return this.delayedPositions.length}},{key:"isPrioritized",value:function(e){return this.thereArePrioritizedPositions()&&this.prioritizedPositions.indexOf(e)>-1}},{key:"thereArePrioritizedPositions",value:function(){return this.prioritizedPositions.length}},{key:"removePrioritizedPosition",value:function(e){var o=this.prioritizedPositions.indexOf(e);-1!==o&&this.prioritizedPositions.splice(o,1)}}],[{key:"decryptedURL",value:function(){return x}}]),e}();o.default=G}})});
//# sourceMappingURL=vam.js.map