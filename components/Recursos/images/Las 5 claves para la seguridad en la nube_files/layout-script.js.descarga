!function(o,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Nibara=e():o.Nibara=e()}(this,function(){return function(o){function e(t){if(i[t])return i[t].exports;var n=i[t]={exports:{},id:t,loaded:!1};return o[t].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=o,e.c=i,e.p="",e(0)}([function(o,e,i){"use strict";function t(o){return o&&o.__esModule?o:{default:o}}function n(){for(var o=[],e=void 0,i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),t=0;t<i.length;t++)e=i[t].split("="),o.push(e[0]),o[e[0]]=e[1];return o}function a(o){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Logger.info("[Breaking News] Creo una cookie para un tiempo de vida de 1 hora.");var i=new Date,t=60;i.setTime(i.getTime()+60*t*1e3);var n={path:"/",expires:i};Cookies(o,e,n)}function r(){Logger.info("[Breaking News] compruebaCookie");var o="BreakingNews-ABC";return Logger.info("[Breaking News] src: "+o),!(null===Cookies(o)||""===Cookies(o)||"null"===Cookies(o)||"undefined"==typeof Cookies(o))}function c(o){var e=void 0;return e=o.replace(/([a-z][A-Z])/g,function(o){return o.substr(0,1)+"-"+o.substr(1,1).toLowerCase()}),e=e.toLowerCase(),e=e.replace(/[^-a-z0-9áéíóúàèìòùüÜñÑ]{1}/g,"+")}function s(){if(document.cookie.indexOf("cookie_20170731")===-1){var o="cookie_20170731";Logger.info("[Cookie Layer] createCookieLaw: "+o);var e=new Date;e.setFullYear(e.getFullYear()+1),document.cookie=o+"=visited; expires="+e.toGMTString()+";",Voonto.$(".capa-cookies").fadeOut().hide()}}function l(){if(Logger.info("[Cookie Layer] checkCookieLaw"),document.cookie.indexOf("cookie_20170731")===-1){var o=$(".capa-cookies");o.show(),Voonto.$(window).one("mousewheel",function(o){Logger.info("[Cookie Layer] create cookie mousewheel"),s()}),Voonto.$(window).one("scroll",function(o){Logger.info("[Cookie Layer] create cookie scroll"),s()}),Voonto.$(window).one("touchmove",function(o){Logger.info("[Cookie Layer] create cookie touchmove"),s()}),o.click(function(){Logger.info("[Cookie Layer] create cookie click"),s()})}}function u(){Logger.info("[Cookie Notification Push] compruebaCookieWebPush");var o=window.location.hostname,e=o.indexOf(".")+1,i="wp_"+o.substring(e);i=i.replace(".","_"),Logger.info("[Cookie Notification Push] src: "+i),null!==Cookies(i)&&""!==Cookies(i)&&"null"!==Cookies(i)&&"undefined"!=typeof Cookies(i)||g()}function d(){Logger.info("[Cookie Notification Push] crearCookieWebPush");var o=window.location.hostname,e=o.indexOf(".")+1,i="wp_"+o.substring(e);i=i.replace(".","_");var t={domain:o,path:"/",expires:365};Cookies(i,"OK",t)}function f(){var o=navigator.userAgent||navigator.vendor||window.opera;return o.indexOf("FBAN")>-1||o.indexOf("FBAV")>-1||o.indexOf("iPhone")>-1||o.indexOf("iPad")>-1||o.indexOf("Apple Computer")>-1}function g(){if(Logger.info("[Cookie Notification Push] ActivarWebPush"),f()===!1){var o={medio:window.vocento.config.nibara.media,imagen:"//www.abc.es/webpush/img/logo_abc.png",alt:"ABC",texto:"abc.es",pushUrl:"//push.abc.es"};"sevilla"===o.medio?(o.imagen="//sevilla.abc.es/webpush/img/logo-sevilla.png",o.alt="ABC de Sevilla",o.texto="abcdesevilla.es",o.pushUrl="//push-sevilla.abc.es"):"lavoz"===o.medio&&(o.imagen="//www.lavozdigital.es/webpush/img/logo-lavozdigital.png",o.alt="La voz de Cádiz",o.texto="lavozdigital.es",o.pushUrl="//push.lavozdigital.es");var e=' \t            <div class="contentwebpush"> \t                <img class="logowebpush lzld" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="'+o.imagen+'" alt="'+o.alt+'"> \t                <div class="holawebpush"> \t                <h3>¡Hola!</h3> \t                <p>¿Quieres que '+o.texto+" te mantenga informado en todo momento?</p> \t                <fieldset class=\"ap-customradiowrapwebpush\"> \t                    <a class=\"btn-leftwebpush\" href=\"javascript:void(0)\" onclick=\"window.ns_onclick(this,'','name=push-permitir&amp;ns_site=abc-es','hidden');AbrirWebPush('"+o.pushUrl+"');return false;\">Permitir</a> \t                    <a class=\"btn-rightwebpush\" href=\"javascript:void(0)\" onclick=\"window.ns_onclick(this,'','name=push-bloquear&amp;ns_site=abc-es','hidden');CerrarWebPush();return false;\">No,gracias</a> \t                </fieldset> \t                </div> \t            </div>";Voonto.$("body").append(e),b.trigger("scroll")}}var h=i(6),p=t(h),k=i(5);Logger.debug("script layout loaded");var b=Voonto.getInstance(),v=b.lookup("vocento.config.nibara").vocUserPath;if(void 0===v)throw"vocUserPath path in config is empty";var w=b.lookup("vocento.config.nibara").libPath;if(void 0===w)throw"nibara libPath config is empty";if(Voonto.$(".boton.subir").click(function(){var o=Voonto.$("[name="+Voonto.$(this).attr("id")+"]");if(o.length)return Voonto.$("html,body").animate({scrollTop:o.offset().top},2e3),!1}),Voonto.is.mobile()||Voonto.is.tablet()){Voonto.$("[data-abre-navegacion]").click(function(){Voonto.$(".navegacion").stop().animate({left:"0px"},350,"linear")}),Voonto.$("[data-cierra-navegacion]").click(function(){var o=Voonto.$(".navegacion").css("width");Voonto.$(".navegacion").stop().animate({left:"-"+o},350,"linear")}),Voonto.$("[data-abre-siguiente]").click(function(){Voonto.$(this).next().slideToggle(),Voonto.$(this).toggleClass("rotado")}),Voonto.is.tablet()&&b.load(w+"sticky-kit/sticky-kit.min.js").then(function(){Voonto.$("[data-sticky]").stick_in_parent({offset_top:20,spacer:!1})}),Voonto.SocialToolbar=new p.default;var m=Voonto.$(".urgente-teinteresa");if(m.length>0){var y=m.find(".cerrar"),V=y.data("type");"urgente"===V?r()?(Logger.info("[Breaking News] urgente hide. Existe cookie"),m.hide()):(Logger.info("[Breaking News] urgente show. No existe cookie"),m.show()):(Logger.info("[Breaking News] urgente show. Existe urgente multiple"),m.show()),y.click(function(){m.hide(),Voonto.SocialToolbar.enable();var o=y.data("type");if("te-interesa"===o)return!1;var e="BreakingNews-ABC",i="Breaking News - ABC";a(e,i)})}Voonto.$(".noticia").click(function(){Logger.info("[Breaking News] click noticia");var o=Voonto.$(this).data("type");if("urgente"===o){var e="BreakingNews-ABC",i="Breaking News - ABC";a(e,i)}Logger.info("[Breaking News] type: ",o);var t=Voonto.$(this).data("href");"undefined"!=typeof t&&(Logger.info("[Breaking News] href: ",t),window.location.href=t)})}else Voonto.$(".segundo-nivel").length?Voonto.$(".titulo-seccion").css({top:"-112px",opacity:1}):Voonto.$(".titulo-seccion").css("opacity",1),Voonto.$("[data-desplegable-navegacion]").on({mouseenter:function(){Voonto.$(this).find("ul").show()},mouseleave:function(){Voonto.$(this).find("ul").hide()}}),b.load(w+"sticky-kit/sticky-kit.min.js").then(function(){Voonto.$("[data-sticky]").stick_in_parent({offset_top:20,spacer:!1})}),(0,k.initSticky)(),Voonto.$(window).on("resize",function(){Logger.info("[Sticky] Window Resize"),(0,k.recalcSticky)()}),Voonto.$("[data-voc-vam]").on("vam:viewable",function(){Logger.info("[Sticky] Banner",Voonto.$(this),"viewable"),(0,k.recalcSticky)()}),b.on("layout:init-sticky",function(){(0,k.initSticky)()}),b.on("layout:recalc-sticky",function(){(0,k.recalcSticky)()});Voonto.$("[data-cerrar]").click(function(){l(),Voonto.$(this).parent().hide()});var L=b.lookup("vocento.config.nibara").vocUserVersion||"201701010101";Logger.info("Loading vocuser version: "+L),b.load(v+"/vocento-vocuser-preloader.js?v="+L);var C=b.lookup("vocento.config.nibara").vamPath;if(void 0===C)throw"nibara vamPath config is empty";var A=C+"/vam.js";Logger.info("Loading vam version: "+A),b.load(A),Voonto.$(".buscador").on("submit",function(o){var e=Voonto.$(this).find("input").val();if(e.length>0){e=c(e),window.location.href.indexOf("lavozdigital.es")>-1&&(e+=".html");var i=Voonto.$(this).attr("action")+e;Logger.debug("action: ",i),Voonto.$(this).attr("action",i)}this.submit()}),window.lzld=function(){return!1},window.ads={printAds:function(o){return Logger.debug("ads blocked"),!1}},(Voonto.is.mobile()||Voonto.is.tablet())&&(Voonto.$(".publi-sticky.sticky > .botones.cerrar").on("click",function(){TagManager.ready.then(function(){try{}catch(o){Logger.error("Error to try track button ",o)}}),Voonto.SocialToolbar.enable()}),Voonto.$(".urgente-teinteresa.sticky > .botones.cerrar").on("click",function(){TagManager.ready.then(function(){try{}catch(o){Logger.error("Error to try track button ",o)}})})),Voonto.$(".boton.subir.suave").on("click",function(){TagManager.ready.then(function(){try{}catch(o){Logger.error("Error to try track button ",o)}})}),l(),window.cookieLayerVisto=function(){Logger.info("[Cookie Layer] Compruebo cookie aviso de Política de Cookies."),l()},u(),window.AbrirWebPush=function(o){Logger.info("[Cookie Notification Push] AbrirWebPush"),d(),Voonto.$(".contentwebpush").hide(),window.open(o,"","width=600,height=700")},window.CerrarWebPush=function(){Logger.info("[Cookie Notification Push] CerrarWebPush"),d(),Voonto.$(".contentwebpush").hide()},Voonto.lazyLoad=new LazyLoad({elements_selector:".lzld",data_src:"src"}),Voonto.$(".lzld-scroll").on("click",function(o){Voonto.lazyLoad.handleScroll()}),"1"===n().akamai_debug&&Voonto.$("body").prepend('<div style="border: solid 1px red;padding: 21px;">x-akamai-device-characteristics: '+vocento.tracking.root.akamai_device+"</div>")},,,,,function(o,e){"use strict";function i(){s="number"==typeof Voonto.$(".hueco-imagen-principal ").height()?Voonto.$(".hueco-imagen-principal ").height()+Voonto.$(".cuerpo-texto").height():Voonto.$(".cuerpo-texto").height(),Logger.info("[Sticky] recalBody tamBody: "+s+" tamColC: "+l)}function t(){Logger.info("[Sticky] Function initSticky"),i(),s>=l&&!c&&a.load(r+"sticky-kit/sticky-kit.min.js").then(function(){Logger.info("[Sticky] initSticky"),Voonto.$("[data-sticky-spacer]").each(function(o,e){var i=Voonto.$(e).parent().data("spacer");"undefined"!=typeof i&&(Logger.info("[Sticky] spacer: .",i),Voonto.$(e).stick_in_parent({offset_top:20,spacer:"."+i}))}),c=!0}),Logger.info("[Sticky] CargaSticky",c)}function n(){Logger.info("[Sticky] Function recalcSticky"),i(),s>=l&&(c?(Logger.info("[Sticky] recalcSticky"),Voonto.$("[data-sticky-spacer]").parent().attr("style",""),Voonto.$(document.body).trigger("sticky_kit:recalc")):t())}Object.defineProperty(e,"__esModule",{value:!0}),e.recalBody=i,e.initSticky=t,e.recalcSticky=n;var a=Voonto.getInstance(),r=a.lookup("vocento.config.nibara").libPath;if(void 0===r)throw"nibara libPath config is empty";var c=!1,s=0,l=Voonto.$(".mas-contenido-articulo").height()},function(o,e){"use strict";function i(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function t(){Logger.info("SocialToolbar handleScroll");var o=void 0;if(o=document.querySelector(".herramientas.fija")){var e=function(){return o.classList.add("redesVisible"),"fijo"},i=function(){return o.classList.remove("redesVisible"),"relativo"},t=o.nextElementSibling,n=t.getBoundingClientRect().bottom>0?i():e(),a=!1,r=void 0;r=document.querySelector(".marcador"),setTimeout(function(){document.addEventListener("scroll",function(){a||(t.getBoundingClientRect().bottom<=(r?r.offsetHeight:0)&&"relativo"===n&&(n=e()),t.getBoundingClientRect().bottom>(r?r.offsetHeight:0)&&"fijo"===n&&(n=i()),a=!0,setTimeout(function(){a=!1},50))})},500)}}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function o(o,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}return function(e,i,t){return i&&o(e.prototype,i),t&&o(e,t),e}}(),a=(parseInt(Voonto.$(".cuerpo-texto p:first").offset().top),Voonto.$(".herramientas.fija")),r=Voonto.$(document),c=function(){function o(e){i(this,o),this.hasToolbar=0!==a.length,this.isEnabled=!1}return n(o,[{key:"enable",value:function(){Logger.info("SocialToolbar enable. isEnabled: "+this.isEnabled),this.isEnabled||(r.on("scroll",t),this.isEnabled=!0)}},{key:"disable",value:function(){if(Logger.info("SocialToolbar disable. isEnabled: "+this.isEnabled),this.isEnabled){r.off("scroll",t),this.isEnabled=!1;var o=document.querySelector(".herramientas.fija");o.classList.remove("redesVisible")}}}]),o}();e.default=c}])});
//# sourceMappingURL=layout-script.js.map